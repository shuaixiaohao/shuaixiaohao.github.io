<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="mLX6JF6IDezTbDnbAdY2HZJGAwyNtqYritWrJQBoKTU" />








  <meta name="baidu-site-verification" content="5NEGr2UF8O" />
  <meta name="baidu-site-verification" content="awsaNG8J7E" />







  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/fh_icon32.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/fh_icon16.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="numpy,pandas,Matplotlib," />










<meta name="description" content="数据分析三剑客 numpy、 pandas、 matplotlib  NumPyNumPy 是什么？​    NumPy是Python中用于科学计算的基础包。它是一个Python库，提供多维数组对象，各种派生的对象（如掩码数组和矩阵），以及数组快速操作的各种各样的例程，包括数学、逻辑、图形操作，排序、选择、I/O、离散傅里叶变换、基本线性代数、基本统计操作，随机模拟以及其他。">
<meta name="keywords" content="numpy,pandas,Matplotlib">
<meta property="og:type" content="article">
<meta property="og:title" content="数据分析">
<meta property="og:url" content="https://fenghao1994.coding.me/2018/01/21/数据分析/index.html">
<meta property="og:site_name" content="帅小昊-博客">
<meta property="og:description" content="数据分析三剑客 numpy、 pandas、 matplotlib  NumPyNumPy 是什么？​    NumPy是Python中用于科学计算的基础包。它是一个Python库，提供多维数组对象，各种派生的对象（如掩码数组和矩阵），以及数组快速操作的各种各样的例程，包括数学、逻辑、图形操作，排序、选择、I/O、离散傅里叶变换、基本线性代数、基本统计操作，随机模拟以及其他。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="c:/Users/Administrator/Desktop/Markdown/images/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/series1.png">
<meta property="og:image" content="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/matplotlib%E5%9B%BE%E5%83%8F%E7%BB%84%E6%88%90.PNG">
<meta property="og:image" content="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/grid.png">
<meta property="og:image" content="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/legend.png">
<meta property="og:image" content="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/hist.png">
<meta property="og:image" content="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/pie1.png">
<meta property="og:image" content="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/pie2.png">
<meta property="og:image" content="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/pie3.png">
<meta property="og:image" content="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/scatter.png">
<meta property="og:image" content="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/%E6%9E%81%E5%9D%90%E6%A0%87%E5%9B%BE.png">
<meta property="og:updated_time" content="2019-02-01T11:50:59.381Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="数据分析">
<meta name="twitter:description" content="数据分析三剑客 numpy、 pandas、 matplotlib  NumPyNumPy 是什么？​    NumPy是Python中用于科学计算的基础包。它是一个Python库，提供多维数组对象，各种派生的对象（如掩码数组和矩阵），以及数组快速操作的各种各样的例程，包括数学、逻辑、图形操作，排序、选择、I/O、离散傅里叶变换、基本线性代数、基本统计操作，随机模拟以及其他。">
<meta name="twitter:image" content="c:/Users/Administrator/Desktop/Markdown/images/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/series1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
  bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>





  <link rel="canonical" href="https://fenghao1994.coding.me/2018/01/21/数据分析/"/>





  <title>数据分析 | 帅小昊-博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">帅小昊-博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">心有多大，舞台就有多大</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://fenghao1994.coding.me/2018/01/21/数据分析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="冯  昊">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/fenghao.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="帅小昊-博客">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">数据分析</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-21T22:29:31+08:00">
                2018-01-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/数据分析/" itemprop="url" rel="index">
                    <span itemprop="name">数据分析</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/01/21/数据分析/" class="leancloud_visitors" data-flag-title="数据分析">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>数据分析三剑客 numpy、 pandas、 matplotlib </p>
<h1 id="NumPy"><a href="#NumPy" class="headerlink" title="NumPy"></a>NumPy</h1><h2 id="NumPy-是什么？"><a href="#NumPy-是什么？" class="headerlink" title="NumPy 是什么？"></a>NumPy 是什么？</h2><p>​    NumPy是Python中用于科学计算的基础包。它是一个Python库，提供多维数组对象，各种派生的对象（如掩码数组和矩阵），以及数组快速操作的各种各样的例程，包括数学、逻辑、图形操作，排序、选择、I/O、离散傅里叶变换、基本线性代数、基本统计操作，随机模拟以及其他。</p>
<a id="more"></a> 
<p>​    <u>NumPy包的核心是ndarray对象。</u>它封装了均匀数据类型的n维数组，带有一些在编译过的代码中执行的操作。NumPy数组和Python标准列表有一些重要的差异：</p>
<ul>
<li>NumPy数组在创建时有固定的大小，不像Python列表（可动态增长）。改变一个ndarray的大小将创建一个新数组，并删除原有数组。</li>
<li>NumPy数组中的元素都必须是相同的数据类型，从而具有相同的内存大小。但有个例外：（Python，包括NumPy）对象数组的元素大小是不同的。</li>
<li>NumPy数组使大量数据上的高级数学运算和其他类型的操作变得容易。通常情况下，这样的操作可能比使用Python的内置列表效率更高，执行的代码更少。</li>
<li>越来越多的基于Python的科学和数学包使用NumPy数组；虽然它们通常支持Python列表作为输入，但他们会在处理之前将这些输入转换为NumPy数组，并总是输出NumPy数组。换句话说，为了高效使用许多（也许甚至是大多数）当今基于Python的科学/数学软件，只要知道如何使用Python的内置列表类型是不够的————你还需要知道如何使用NumPy数组。</li>
</ul>
<h2 id="Ndarray-对象"><a href="#Ndarray-对象" class="headerlink" title="Ndarray 对象"></a>Ndarray 对象</h2><p>NumPy 中定义的最重要的对象是称为 <code>ndarray</code> 的 N 维数组类型。 它描述相同类型的元素集合。 可以使用基于零的索引访问集合中的项目。</p>
<p><code>ndarray</code>中的每个元素在内存中使用相同大小的块。 <code>ndarray</code>中的每个元素是数据类型对象的对象(称为 <code>dtype</code>)。</p>
<h3 id="创建ndarray"><a href="#创建ndarray" class="headerlink" title="创建ndarray"></a>创建ndarray</h3><p>导入numpy库 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>
<p><strong>使用np.array()创建多维数组</strong> </p>
<p>参数为列表： np.array([1,2,3])</p>
<p>注意：</p>
<ul>
<li>numpy默认ndarray的所有元素的类型是相同的</li>
<li>如果传进来的列表中包含不同的类型，则统一为同一类型，优先级：str&gt;float&gt;int</li>
</ul>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="string">"3"</span>])</span><br><span class="line">&gt;&gt;&gt;array([<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>], dtype=<span class="string">'&lt;U11'</span>)</span><br></pre></td></tr></table></figure>
<p><strong>使用np的常用函数(routines)创建</strong> </p>
<p>包含以下常见创建方法：</p>
<p>​    <strong>1、np.ones(shape, dtype=None, order=’C’)</strong> </p>
<p>功能：按照指定形状创建多维数组，并用1填充</p>
<p>参数：</p>
<p>shape 用于指定创建的多维数组的形状 可以传入2 或者 (2,3)</p>
<p>dtype 数据的类型 np.int8 np.float64</p>
<p>返回值：返沪创建好的多维数组数组</p>
<p>​    <strong>2、np.zeros(shape, dtype=float, order=’C’)</strong> </p>
<p>功能类似np.zeros只不过不是用1填充 而是用0填充</p>
<p>​    <strong>3、np.full(shape, fill_value, dtype=None, order=’C’)</strong> </p>
<p>shape指定形状 一般可以是 2 或者 (2,3) 之类的</p>
<p>fill_value指定填充的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.full(shape=(2,3),fill_value=5)</span><br><span class="line">&gt;&gt;&gt;array([[5, 5, 5],</span><br><span class="line">       	  [5, 5, 5]])</span><br></pre></td></tr></table></figure>
<p>​    <strong>4、np.eye(N, M=None, k=0, dtype=floa</strong> </p>
<p>功能：创建一个方阵（行和列的数量相等）</p>
<p>N 指定矩阵中有多少行和列</p>
<p>对角线为1其他的位置为0（单位矩阵）</p>
<p>​    <strong>5、 np.linspace(start, stop, num=50, endpoint=True, retstep=False, dtype=None)</strong> </p>
<p>功能：把start到stop的这个范围的数，等分成num份儿，填入数组</p>
<p>​    <strong>6、np.logspace(start, stop, num=50, endpoint=True, retstep=False, dtype=None)</strong> </p>
<p>功能：把start到stop的这个范围的数，等分成num份儿，获得的值作为10的指数，求出来的值，填入数组</p>
<p>​    <strong>7、 np.arange([start, ]stop, [step, ]dtype=None) </strong></p>
<p>从start，到end，每隔step去一个值，放入一个数组</p>
<p>​    <strong>8、np.random.randint(low, high=None, size=None, dtype=’l’)</strong> </p>
<p>从low到high的范围随机取整数，填充多维数组 size用于指定数组的形状 如 2 (2,3)</p>
<p>​    <strong>9、np.random.randn(d0, d1, …, dn)</strong> </p>
<p>传入几个参数，就创建几维数组</p>
<p>产生以0为中心 方差为1 的 标准正太分布 的随机数 填充数组</p>
<p>如 np.random.randn(2,3,3) 产生一个三维数组 数组中有两个数组 两个数组中分别有三个数组 三个数组中每个都有三个元素</p>
<p>​    <strong>10、np.random.normal(loc=0.0, scale=1.0, size=None)</strong> </p>
<p>np.random.randn是标准正态分布（以0为中心，方差是1） normal可以指定中心和方差</p>
<p>loc 正态分别的中心</p>
<p>scale 正态分布的变化范围</p>
<p>size 数组的形状 如 2 (2,3)</p>
<p>​    <strong>11、np.random.random(size=None)</strong> </p>
<p>size指定三维数组的形状 如 2 (2,3)</p>
<p>函数随机生成0到1的随机数（左闭右开）填充数组</p>
<h3 id="ndarray的属性"><a href="#ndarray的属性" class="headerlink" title="ndarray的属性"></a>ndarray的属性</h3><p>4个必记参数：</p>
<p>ndim：维度</p>
<p>shape：形状（各维度的长度）</p>
<p>size：总长度</p>
<p>dtype：元素类型</p>
<h2 id="Matplotlib"><a href="#Matplotlib" class="headerlink" title="Matplotlib"></a>Matplotlib</h2><p>Matplotlib 是 Python 的绘图库。 它可与 NumPy 一起使用，提供了一种有效的 MatLab 开源替代方案。 它也可以和图形工具包一起使用，如 PyQt 和 wxPython。</p>
<p><strong>1.引入matplotlib.pyplot</strong> </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure>
<p><strong>2.读取图片 pyplot.imread(要读取的文件路的径字)</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jin = plt.imread(&quot;./jin.png&quot;)</span><br></pre></td></tr></table></figure>
<p><strong>3.查看引入的图片的属性（其实图片就是一个三维数组）</strong> </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">jin <span class="comment"># 其实图片就是一个三维数组 </span></span><br><span class="line">jin.ndim <span class="comment"># ndarray的ndim属性可以查看当前多维数组的维度</span></span><br><span class="line">jin.shape <span class="comment">#一个多维数组 里面有273个数组 这273个数组里面分别有411个数组 411个数组中有三个元素 这个三个元素分别对应 r g b 的值</span></span><br><span class="line">jin.size <span class="comment">#多维数组的总长度</span></span><br><span class="line">jin.dtype <span class="comment">#里面元素的数据类型</span></span><br><span class="line">jin.shape</span><br></pre></td></tr></table></figure>
<p><strong>4.根据传入的数据去绘制图片 pyplot.imshow(传入多维数组数据)</strong> </p>
<h2 id="ndarray的基本操作"><a href="#ndarray的基本操作" class="headerlink" title="ndarray的基本操作"></a>ndarray的基本操作</h2><h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><p><code>ndarray</code>对象的内容可以通过索引或切片来访问和修改，就像 Python 的内置容器对象一样。</p>
<p>如前所述，<code>ndarray</code>对象中的元素遵循基于零的索引。 有三种可用的索引方法类型： <strong>字段访问，基本切片</strong>和<strong>高级索引</strong>。</p>
<p>基本切片是 Python 中基本切片概念到 n 维的扩展。 通过将<code>start</code>，<code>stop</code>和<code>step</code>参数提供给内置的<code>slice</code>函数来构造一个 Python <code>slice</code>对象。 此<code>slice</code>对象被传递给数组来提取数组的一部分。</p>
<p>基本索引：一维与列表完全一致 多维时同理</p>
<h3 id="切片"><a href="#切片" class="headerlink" title="切片"></a>切片</h3><p> 一维与列表切片完全一致 多维时同理</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">nd = np.random.randint(0,10,size=(5,4))</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">nd[1:3]</span><br><span class="line">nd[1:3,0:2] # 从外往里 层层切片</span><br><span class="line"># start:end</span><br><span class="line">#  start:end:step</span><br><span class="line">nd[0:4:2,0:4:2]</span><br><span class="line">nd[::2,::2]</span><br><span class="line">nd[::-1] # 把最外围的顺序颠倒</span><br><span class="line">nd[:,::-1] #把往里一维的内部元素的顺序颠倒</span><br></pre></td></tr></table></figure>
<h3 id="变形"><a href="#变形" class="headerlink" title="变形"></a>变形</h3><p>使用reshape函数，注意参数是一个tuple！</p>
<h3 id="连结"><a href="#连结" class="headerlink" title="连结"></a>连结</h3><ol>
<li>np.concatenate() 连结需要注意的点：</li>
<li>连结的参数是列表：一定要加小括号</li>
<li>维度必须相同</li>
<li>形状相符</li>
<li>连结的方向默认是shape这个tuple的第一个值所代表的维度方向</li>
<li>可通过axis参数改变连结的方向</li>
</ol>
<h3 id="切分"><a href="#切分" class="headerlink" title="切分"></a>切分</h3><p>与级联类似，三个函数完成切分工作：</p>
<ul>
<li>np.split</li>
</ul>
<p>参数 1.要切分的数组 ；2.要分成几份； 3切分时候的轴（axis默认是0）</p>
<ul>
<li>np.vsplit</li>
</ul>
<p>vertical ，对垂直方向的元素进行切割（切割的时候是水平去切的）</p>
<ul>
<li>np.hsplit</li>
</ul>
<p>horizon ，对水平方向上的元素进行切割（切的时候垂直切）</p>
<h3 id="副本"><a href="#副本" class="headerlink" title="副本"></a>副本</h3><p>所有赋值运算不会为ndarray的任何元素创建副本。对赋值后的对象的操作也对原来的对象生效。</p>
<p>可使用copy()函数创建副本 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ndarr2 = ndarr.copy() #多维数组调用自身的copy()方法 就会返回一个一模一样 但是完全独立的数组</span><br></pre></td></tr></table></figure>
<h2 id="ndarray的聚合操作"><a href="#ndarray的聚合操作" class="headerlink" title="ndarray的聚合操作"></a>ndarray的聚合操作</h2><h3 id="求和np-sum"><a href="#求和np-sum" class="headerlink" title="求和np.sum"></a>求和np.sum</h3><h3 id="最大最小值：np-max-np-min"><a href="#最大最小值：np-max-np-min" class="headerlink" title="最大最小值：np.max/ np.min"></a>最大最小值：np.max/ np.min</h3><h3 id="其他聚合操作"><a href="#其他聚合操作" class="headerlink" title="其他聚合操作"></a>其他聚合操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Function Name    NaN-safe Version    Description</span><br><span class="line">np.sum    np.nansum    Compute sum of elements</span><br><span class="line">np.prod    np.nanprod    Compute product of elements</span><br><span class="line">np.mean    np.nanmean    Compute mean of elements</span><br><span class="line">np.std    np.nanstd    Compute standard deviation</span><br><span class="line">np.var    np.nanvar    Compute variance</span><br><span class="line">np.min    np.nanmin    Find minimum value</span><br><span class="line">np.max    np.nanmax    Find maximum value</span><br><span class="line">np.argmin    np.nanargmin    Find index of minimum value</span><br><span class="line">np.argmax    np.nanargmax    Find index of maximum value</span><br><span class="line">np.median    np.nanmedian    Compute median of elements</span><br><span class="line">np.percentile    np.nanpercentile    Compute rank-based statistics of elements</span><br><span class="line">np.any    N/A    Evaluate whether any elements are true</span><br><span class="line">np.all    N/A    Evaluate whether all elements are true</span><br><span class="line">np.power 幂运算</span><br></pre></td></tr></table></figure>
<h4 id="操作文件"><a href="#操作文件" class="headerlink" title="操作文件"></a>操作文件</h4><p>使用pandas打开文件president_heights.csv 获取文件中的数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="comment"># csv comma seperated value 逗号 分隔 的 值</span></span><br><span class="line">data = pd.read_csv(<span class="string">"./president_heights.csv"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="ndarray的矩阵操作"><a href="#ndarray的矩阵操作" class="headerlink" title="ndarray的矩阵操作"></a>ndarray的矩阵操作</h2><h3 id="基本矩阵操作"><a href="#基本矩阵操作" class="headerlink" title="基本矩阵操作"></a>基本矩阵操作</h3><p>1) 算术运算符：</p>
<ul>
<li>加减乘除</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ndarr = np.random.randint(<span class="number">0</span>,<span class="number">10</span>,size=(<span class="number">4</span>,<span class="number">5</span>))</span><br><span class="line">ndarr</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">array([[<span class="number">4</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">3</span>, <span class="number">0</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">4</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">0</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">3</span>]])</span><br><span class="line"><span class="comment"># 矩阵和数值的运算</span></span><br><span class="line">ndarr + <span class="number">1</span> <span class="comment"># 矩阵和数值做加法 给矩阵中所有的值都加上这个数 广播机制</span></span><br><span class="line">ndarr - <span class="number">1</span> <span class="comment"># 矩阵中每一个值都减这个数值</span></span><br><span class="line">ndarr * <span class="number">2</span> <span class="comment"># 每个值都乘以这个数值</span></span><br><span class="line">ndarr / <span class="number">2</span> <span class="comment"># 每个值都除以这个数值</span></span><br></pre></td></tr></table></figure>
<p>2) 矩阵积<code>numpy.dot()</code> </p>
<p>此函数返回两个数组的点积。 对于二维向量，其等效于矩阵乘法。 对于一维数组，它是向量的内积。 对于 N 维数组，它是<code>a</code>的最后一个轴上的和与<code>b</code>的倒数第二个轴的乘积。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np </span><br><span class="line"></span><br><span class="line">a = np.array([[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]]) </span><br><span class="line">b = np.array([[<span class="number">11</span>,<span class="number">12</span>],[<span class="number">13</span>,<span class="number">14</span>]]) </span><br><span class="line">np.dot(a,b)</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="number">37</span>  <span class="number">40</span>] </span><br><span class="line"> [<span class="number">85</span>  <span class="number">92</span>]]   <span class="comment">#[[1*11+2*13, 1*12+2*14],[3*11+4*13, 3*12+4*14]]</span></span><br></pre></td></tr></table></figure>
<h3 id="广播机制"><a href="#广播机制" class="headerlink" title="广播机制"></a>广播机制</h3><p><strong>广播</strong>是指 NumPy 在算术运算期间处理不同形状的数组的能力。 对数组的算术运算通常在相应的元素上进行。 如果两个阵列具有完全相同的形状，则这些操作被无缝执行。 </p>
<p>如果两个数组的维数不相同，则元素到元素的操作是不可能的。 然而，在 NumPy 中仍然可以对形状不相似的数组进行操作，因为它拥有广播功能。 较小的数组会<strong>广播</strong>到较大数组的大小，以便使它们的形状可兼容。</p>
<p>如果满足以下规则，可以进行广播：</p>
<ul>
<li><code>ndim</code>较小的数组会在前面追加一个长度为 1 的维度。</li>
<li>输出数组的每个维度的大小是输入数组该维度大小的最大值。</li>
<li>如果输入在每个维度中的大小与输出大小匹配，或其值正好为 1，则在计算中可它。</li>
<li>如果输入的某个维度大小为 1，则该维度中的第一个数据元素将用于该维度的所有计算。</li>
</ul>
<p>如果上述规则产生有效结果，并且满足以下条件之一，那么数组被称为<strong>可广播的</strong>。</p>
<ul>
<li>数组拥有相同形状。</li>
<li>数组拥有相同的维数，每个维度拥有相同长度，或者长度为 1。</li>
<li>数组拥有极少的维度，可以在其前面追加长度为 1 的维度，使上述条件成立。</li>
</ul>
<p>【重要】ndarray广播机制规则</p>
<ul>
<li><strong>缺失元素用已有值填充</strong> </li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(<span class="number">3</span>).reshape((<span class="number">3</span>, <span class="number">1</span>))</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">array([[<span class="number">0</span>],</span><br><span class="line">       [<span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>]])</span><br><span class="line">b = np.arange(<span class="number">3</span>)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">a + b</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]])</span><br></pre></td></tr></table></figure>
<h2 id="ndarray的排序"><a href="#ndarray的排序" class="headerlink" title="ndarray的排序"></a>ndarray的排序</h2><h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><p>numpy.sort()与ndarray.sort()都可以，但有区别：</p>
<ul>
<li>numpy.sort()不改变输入</li>
<li>ndarray.sort()本地处理，不占用空间，但改变输入</li>
</ul>
<h3 id="部分排序"><a href="#部分排序" class="headerlink" title="部分排序"></a>部分排序</h3><p>np.partition(a,k)</p>
<p>有的时候我们不是对全部数据感兴趣，我们可能只对最小或最大的一部分感兴趣。</p>
<ul>
<li>当k为正时，我们想要得到最小的k个数</li>
<li>当k为负时，我们想要得到最大的k个数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ndarr3 = np.random.randint(<span class="number">0</span>,<span class="number">100</span>,size=<span class="number">15</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>array([<span class="number">89</span>,  <span class="number">2</span>, <span class="number">20</span>, <span class="number">55</span>, <span class="number">76</span>, <span class="number">96</span>, <span class="number">92</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">92</span>, <span class="number">13</span>, <span class="number">65</span>, <span class="number">15</span>, <span class="number">10</span>, <span class="number">52</span>])</span><br><span class="line"></span><br><span class="line">numpy.partition(ndarr3,<span class="number">3</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>array([ <span class="number">2</span>, <span class="number">10</span>, <span class="number">13</span>, <span class="number">15</span>, <span class="number">20</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">52</span>, <span class="number">92</span>, <span class="number">92</span>, <span class="number">96</span>, <span class="number">65</span>, <span class="number">76</span>, <span class="number">55</span>, <span class="number">89</span>]) <span class="comment"># 前面三个最小排序</span></span><br><span class="line"></span><br><span class="line">numpy.partition(ndarr3,<span class="number">-5</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>array([ <span class="number">2</span>, <span class="number">22</span>, <span class="number">20</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">13</span>, <span class="number">23</span>, <span class="number">52</span>, <span class="number">55</span>, <span class="number">65</span>, <span class="number">76</span>, <span class="number">89</span>, <span class="number">92</span>, <span class="number">96</span>, <span class="number">92</span>]) <span class="comment"># 后面五个最大排序</span></span><br></pre></td></tr></table></figure>
<h2 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h2><p>以下函数用于对<code>dtype</code>为<code>numpy.string_</code>或<code>numpy.unicode_</code>的数组执行向量化字符串操作。 它们基于 Python 内置库中的标准字符串函数。</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>函数及描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.</td>
<td><code>add()</code> 返回两个<code>str</code>或<code>Unicode</code>数组的逐个字符串连接</td>
</tr>
<tr>
<td>2.</td>
<td><code>multiply()</code> 返回按元素多重连接后的字符串</td>
</tr>
<tr>
<td>3.</td>
<td><code>center()</code> 返回给定字符串的副本，其中元素位于特定字符串的中央</td>
</tr>
<tr>
<td>4.</td>
<td><code>capitalize()</code> 返回给定字符串的副本，其中只有第一个字符串大写</td>
</tr>
<tr>
<td>5.</td>
<td><code>title()</code> 返回字符串或 Unicode 的按元素标题转换版本</td>
</tr>
<tr>
<td>6.</td>
<td><code>lower()</code> 返回一个数组，其元素转换为小写</td>
</tr>
<tr>
<td>7.</td>
<td><code>upper()</code> 返回一个数组，其元素转换为大写</td>
</tr>
<tr>
<td>8.</td>
<td><code>split()</code> 返回字符串中的单词列表，并使用分隔符来分割</td>
</tr>
<tr>
<td>9.</td>
<td><code>splitlines()</code> 返回元素中的行列表，以换行符分割</td>
</tr>
<tr>
<td>10.</td>
<td><code>strip()</code> 返回数组副本，其中元素移除了开头或者结尾处的特定字符</td>
</tr>
<tr>
<td>11.</td>
<td><code>join()</code> 返回一个字符串，它是序列中字符串的连接</td>
</tr>
<tr>
<td>12.</td>
<td><code>replace()</code> 返回字符串的副本，其中所有子字符串的出现位置都被新字符串取代</td>
</tr>
<tr>
<td>13.</td>
<td><code>decode()</code> 按元素调用<code>str.decode</code></td>
</tr>
<tr>
<td>14.</td>
<td><code>encode()</code> 按元素调用<code>str.encode</code></td>
</tr>
</tbody>
</table>
<p>这些函数在字符数组类(<code>numpy.char</code>)中定义。 较旧的 Numarray 包包含<code>chararray</code>类。 <code>numpy.char</code>类中的上述函数在执行向量化字符串操作时非常有用。</p>
<h3 id="numpy-char-add"><a href="#numpy-char-add" class="headerlink" title="numpy.char.add()"></a><code>numpy.char.add()</code></h3><p>函数执行按元素的字符串连接。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line">print &apos;连接两个字符串：&apos; </span><br><span class="line">print np.char.add([&apos;hello&apos;],[&apos; xyz&apos;]) </span><br><span class="line">print &apos;\n&apos;</span><br><span class="line"></span><br><span class="line">print &apos;连接示例：&apos; </span><br><span class="line">print np.char.add([&apos;hello&apos;, &apos;hi&apos;],[&apos; abc&apos;, &apos; xyz&apos;])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">连接两个字符串：</span><br><span class="line">[&apos;hello xyz&apos;]</span><br><span class="line"></span><br><span class="line">连接示例：</span><br><span class="line">[&apos;hello abc&apos; &apos;hi xyz&apos;]</span><br></pre></td></tr></table></figure>
<h3 id="numpy-char-multiply"><a href="#numpy-char-multiply" class="headerlink" title="numpy.char.multiply()"></a><code>numpy.char.multiply()</code></h3><p>这个函数执行多重连接。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line">print np.char.multiply(&apos;Hello &apos;,3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Hello Hello Hello</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<h3 id="numpy-char-center"><a href="#numpy-char-center" class="headerlink" title="numpy.char.center()"></a><code>numpy.char.center()</code></h3><p>此函数返回所需宽度的数组，以便输入字符串位于中心，并使用<code>fillchar</code>在左侧和右侧进行填充。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line"># np.char.center(arr, width,fillchar) </span><br><span class="line">print np.char.center(&apos;hello&apos;, 20,fillchar = &apos;*&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*******hello********</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<h3 id="numpy-char-capitalize"><a href="#numpy-char-capitalize" class="headerlink" title="numpy.char.capitalize()"></a><code>numpy.char.capitalize()</code></h3><p>函数返回字符串的副本，其中第一个字母大写</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line">print np.char.capitalize(&apos;hello world&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello world</span><br></pre></td></tr></table></figure>
<h3 id="numpy-char-title"><a href="#numpy-char-title" class="headerlink" title="numpy.char.title()"></a><code>numpy.char.title()</code></h3><p>返回输入字符串的按元素标题转换版本，其中每个单词的首字母都大写。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line">print np.char.title(&apos;hello how are you?&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello How Are You?</span><br></pre></td></tr></table></figure>
<h3 id="numpy-char-lower"><a href="#numpy-char-lower" class="headerlink" title="numpy.char.lower()"></a><code>numpy.char.lower()</code></h3><p>函数返回一个数组，其元素转换为小写。它对每个元素调用<code>str.lower</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line">print np.char.lower([&apos;HELLO&apos;,&apos;WORLD&apos;]) </span><br><span class="line">print np.char.lower(&apos;HELLO&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[&apos;hello&apos; &apos;world&apos;]</span><br><span class="line">hello</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<h3 id="numpy-char-upper"><a href="#numpy-char-upper" class="headerlink" title="numpy.char.upper()"></a><code>numpy.char.upper()</code></h3><p>函数返回一个数组，其元素转换为大写。它对每个元素调用<code>str.upper</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line">print np.char.upper(&apos;hello&apos;) </span><br><span class="line">print np.char.upper([&apos;hello&apos;,&apos;world&apos;])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">HELLO</span><br><span class="line">[&apos;HELLO&apos; &apos;WORLD&apos;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<h3 id="numpy-char-split"><a href="#numpy-char-split" class="headerlink" title="numpy.char.split()"></a><code>numpy.char.split()</code></h3><p>此函数返回输入字符串中的单词列表。 默认情况下，空格用作分隔符。 否则，指定的分隔符字符用于分割字符串。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line">print np.char.split (&apos;hello how are you?&apos;) </span><br><span class="line">print np.char.split (&apos;YiibaiPoint,Hyderabad,Telangana&apos;, sep = &apos;,&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[&apos;hello&apos;, &apos;how&apos;, &apos;are&apos;, &apos;you?&apos;]</span><br><span class="line">[&apos;YiibaiPoint&apos;, &apos;Hyderabad&apos;, &apos;Telangana&apos;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<h3 id="numpy-char-splitlines"><a href="#numpy-char-splitlines" class="headerlink" title="numpy.char.splitlines()"></a><code>numpy.char.splitlines()</code></h3><p>函数返回数组中元素的单词列表，以换行符分割。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line">print np.char.splitlines(&apos;hello\nhow are you?&apos;) </span><br><span class="line">print np.char.splitlines(&apos;hello\rhow are you?&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[&apos;hello&apos;, &apos;how are you?&apos;]</span><br><span class="line">[&apos;hello&apos;, &apos;how are you?&apos;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p><code>&#39;\n&#39;</code>，<code>&#39;\r&#39;</code>，<code>&#39;\r\n&#39;</code>都会用作换行符。</p>
<h3 id="numpy-char-strip"><a href="#numpy-char-strip" class="headerlink" title="numpy.char.strip()"></a><code>numpy.char.strip()</code></h3><p>函数返回数组的副本，其中元素移除了开头或结尾处的特定字符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line">print np.char.strip(&apos;ashok arora&apos;,&apos;a&apos;) </span><br><span class="line">print np.char.strip([&apos;arora&apos;,&apos;admin&apos;,&apos;java&apos;],&apos;a&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shok aror</span><br><span class="line">[&apos;ror&apos; &apos;dmin&apos; &apos;jav&apos;]</span><br></pre></td></tr></table></figure>
<h3 id="numpy-char-join"><a href="#numpy-char-join" class="headerlink" title="numpy.char.join()"></a><code>numpy.char.join()</code></h3><p>这个函数返回一个字符串，其中单个字符由特定的分隔符连接。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line">print np.char.join(&apos;:&apos;,&apos;dmy&apos;) </span><br><span class="line">print np.char.join([&apos;:&apos;,&apos;-&apos;],[&apos;dmy&apos;,&apos;ymd&apos;])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">d:m:y</span><br><span class="line">[&apos;d:m:y&apos; &apos;y-m-d&apos;]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<h3 id="numpy-char-replace"><a href="#numpy-char-replace" class="headerlink" title="numpy.char.replace()"></a><code>numpy.char.replace()</code></h3><p>这个函数返回字符串副本，其中所有字符序列的出现位置都被另一个给定的字符序列取代。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line">print np.char.replace (&apos;He is a good boy&apos;, &apos;is&apos;, &apos;was&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">He was a good boy</span><br></pre></td></tr></table></figure>
<h3 id="numpy-char-decode"><a href="#numpy-char-decode" class="headerlink" title="numpy.char.decode()"></a><code>numpy.char.decode()</code></h3><p>这个函数在给定的字符串中使用特定编码调用<code>str.decode()</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line"></span><br><span class="line">a = np.char.encode(&apos;hello&apos;, &apos;cp500&apos;) </span><br><span class="line">print a </span><br><span class="line">print np.char.decode(a,&apos;cp500&apos;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\x88\x85\x93\x93\x96</span><br><span class="line">hello</span><br></pre></td></tr></table></figure>
<h3 id="numpy-char-encode"><a href="#numpy-char-encode" class="headerlink" title="numpy.char.encode()"></a><code>numpy.char.encode()</code></h3><p>此函数对数组中的每个元素调用<code>str.encode</code>函数。 默认编码是<code>utf_8</code>，可以使用标准 Python 库中的编解码器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np </span><br><span class="line">a = np.char.encode(&apos;hello&apos;, &apos;cp500&apos;) </span><br><span class="line">print a</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\x88\x85\x93\x93\x96</span><br></pre></td></tr></table></figure>
<h1 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h1><p>​    <a href="http://pandas.pydata.org/pandas-docs/stable/" target="_blank" rel="noopener">官方文档</a></p>
<p>数据分析三剑客 numpy pandas matplotlib </p>
<h2 id="Pandas介绍"><a href="#Pandas介绍" class="headerlink" title="Pandas介绍"></a>Pandas介绍</h2><p>Pandas是一个开放源码的Python库，它使用强大的数据结构提供高性能的数据操作和分析工具。它的名字：<em>Pandas</em>是从<em>Panel Data</em> - 多维数据的计量经济学(<em>an Econometrics from Multidimensional data</em>)。</p>
<p>2008年，为满足需要高性能，灵活的数据分析工具，开发商Wes McKinney开始开发<em>Pandas</em>。</p>
<p>在<em>Pandas</em>之前，Python主要用于数据迁移和准备。它对数据分析的贡献更小。 <em>Pandas</em>解决了这个问题。 使用<em>Pandas</em>可以完成数据处理和分析的五个典型步骤，而不管数据的来源 - 加载，准备，操作，模型和分析。</p>
<p>Python <em>Pandas</em>用于广泛的领域，包括金融，经济，统计，分析等学术和商业领域。</p>
<p><strong>Pandas的主要特点</strong> </p>
<ul>
<li>快速高效的DataFrame对象，具有默认和自定义的索引。</li>
<li>将数据从不同文件格式加载到内存中的数据对象的工具。</li>
<li>丢失数据的数据对齐和综合处理。</li>
<li>重组和摆动日期集。</li>
<li>基于标签的切片，索引和大数据集的子集。</li>
<li>可以删除或插入来自数据结构的列。</li>
<li>按数据分组进行聚合和转换。</li>
<li>高性能合并和数据加入。</li>
<li>时间序列功能。</li>
</ul>
<h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><p><em>Pandas</em>处理以下三个数据结构 -</p>
<ul>
<li>系列(<code>Series</code>)</li>
<li>数据帧(<code>DataFrame</code>)</li>
<li>面板(<code>Panel</code>)</li>
</ul>
<p>这些数据结构构建在<em>Numpy</em>数组之上，这意味着它们很快。</p>
<p><strong>维数和描述</strong> </p>
<p>考虑这些数据结构的最好方法是，较高维数据结构是其较低维数据结构的容器。 例如，<code>DataFrame</code>是<code>Series</code>的容器，<code>Panel</code>是<code>DataFrame</code>的容器。</p>
<table>
<thead>
<tr>
<th>数据结构</th>
<th>维数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>系列</td>
<td>1</td>
<td><code>1</code>D标记均匀数组，大小不变。</td>
</tr>
<tr>
<td>数据帧</td>
<td>2</td>
<td>一般<code>2</code>D标记，大小可变的表结构与潜在的异质类型的列。</td>
</tr>
<tr>
<td>面板</td>
<td>3</td>
<td>一般<code>3</code>D标记，大小可变数组。</td>
</tr>
</tbody>
</table>
<p>构建和处理两个或更多个维数组是一项繁琐的任务，用户在编写函数时要考虑数据集的方向。 但是使用<em>Pandas</em>数据结构，减少了用户的思考。</p>
<p>例如，使用表格数据(<code>DataFrame</code>)，在语义上更有用于考虑索引(行)和列，而不是轴<code>0</code>和轴<code>1</code>。</p>
<p><strong>可变性</strong></p>
<p>所有<em>Pandas</em>数据结构是值可变的(可以更改)，除了系列都是大小可变的。系列是大小不变的。</p>
<blockquote>
<p>注 - <code>DataFrame</code>被广泛使用，是最重要的数据结构之一。面板使用少得多。</p>
</blockquote>
<h3 id="系列（Series）"><a href="#系列（Series）" class="headerlink" title="系列（Series）"></a>系列（Series）</h3><p>系列是具有均匀数据的一维数组结构。例如，以下系列是整数：<code>10</code>,<code>23</code>,<code>56</code>，<code>...</code>的集合。</p>
<p><img src="C:/Users/Administrator/Desktop/Markdown/images/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/series1.png" alt="img"></p>
<p><strong>关键点</strong> </p>
<ul>
<li>均匀数据</li>
<li>尺寸大小不变</li>
<li>数据的值可变</li>
</ul>
<h3 id="数据帧（DataFrame）"><a href="#数据帧（DataFrame）" class="headerlink" title="数据帧（DataFrame）"></a>数据帧（DataFrame）</h3><p>数据帧(<em>DataFrame</em>)是一个具有异构数据的二维数组。</p>
<p><strong>关键点</strong> </p>
<ul>
<li>异构数据</li>
<li>大小可变</li>
<li>数据可变</li>
</ul>
<h3 id="面板（Panel）"><a href="#面板（Panel）" class="headerlink" title="面板（Panel）"></a>面板（Panel）</h3><p>面板是具有异构数据的三维数据结构。在图形表示中很难表示面板。但是一个面板可以说明为<code>DataFrame</code>的容器。</p>
<p><strong>关键点</strong> </p>
<ul>
<li>异构数据</li>
<li>大小可变</li>
<li>数据可变</li>
</ul>
<h2 id="Series（系列）"><a href="#Series（系列）" class="headerlink" title="Series（系列）"></a>Series（系列）</h2><p>Series是一种类似于一维数组的对象，由下面两个部分组成：</p>
<ul>
<li>index：相关的数据索引标签</li>
<li>values：一组数据（ndarray类型）</li>
</ul>
<h3 id="1-Series的创建"><a href="#1-Series的创建" class="headerlink" title="1. Series的创建"></a>1. Series的创建</h3><p>两种创建方式：</p>
<p>(1) 由列表或numpy数组创建</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">默认索引为<span class="number">0</span>到N<span class="number">-1</span>的整数型索引</span><br><span class="line">Series([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],index=(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>)) <span class="comment"># 通过index可以指定索引 注意：索引的个数和值的个数要对应</span></span><br></pre></td></tr></table></figure>
<p>(2) 由字典创建</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Series(&#123;<span class="string">"A"</span>:<span class="number">10</span>,<span class="string">"B"</span>:<span class="number">20</span>,<span class="string">"C"</span>:<span class="number">30</span>&#125;)</span><br><span class="line">&gt;&gt;&gt;	A    <span class="number">10</span></span><br><span class="line">	B    <span class="number">20</span></span><br><span class="line">	C    <span class="number">30</span></span><br><span class="line">	dtype: int64</span><br></pre></td></tr></table></figure>
<h3 id="2-Series的索引和切片"><a href="#2-Series的索引和切片" class="headerlink" title="2. Series的索引和切片"></a>2. Series的索引和切片</h3><p>可以使用中括号取单个索引（此时返回的是元素类型），或者中括号里一个列表取多个索引（此时返回的仍然是一个Series类型）。分为显示索引和隐式索引：</p>
<p>(1) 显式索引：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 使用index中的元素作为索引值</span><br><span class="line">- 使用.loc[]（推荐）</span><br></pre></td></tr></table></figure>
<p>注意，此时是闭区间</p>
<p>(2) 隐式索引：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 使用整数作为索引值</span><br><span class="line">- 使用.iloc[]（推荐）</span><br></pre></td></tr></table></figure>
<p>注意，此时是半开区间</p>
<p><strong>根据索引对Series进行切片</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s1</span><br><span class="line">&gt;&gt;&gt;	语文    150</span><br><span class="line">	数学    150</span><br><span class="line">	英语    150</span><br><span class="line">	理综    300</span><br><span class="line">	dtype: int64</span><br><span class="line">s1.loc[&apos;语文&apos;:&apos;英语&apos;]</span><br><span class="line">s1.iloc[0:4]</span><br></pre></td></tr></table></figure>
<h3 id="3-Series的常用属性和方法"><a href="#3-Series的常用属性和方法" class="headerlink" title="3. Series的常用属性和方法"></a>3. Series的常用属性和方法</h3><ul>
<li><p>可以把Series看成一个定长的有序字典</p>
</li>
<li><p>可以通过shape，size，index,values等得到series的属性</p>
</li>
<li><p>head(),tail()快速查看Series对象的样式</p>
<p>例：s.head(2)看头两个 s.tail(1)看后一个</p>
</li>
<li><p>当索引没有对应的值时，可能出现缺失数据显示NaN（not a number）的情况 </p>
</li>
<li><p>使用pd.isnull()，pd.notnull()，或自带isnull(),notnull()函数检测缺失数据 </p>
</li>
<li><p>Series对象本身及其实例都有一个name属性 </p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Series([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],index=(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>),name=<span class="string">"张三"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a    <span class="number">1</span></span><br><span class="line">	b    <span class="number">2</span></span><br><span class="line">	c    <span class="number">3</span></span><br><span class="line">	Name: 张三, dtype: int64</span><br></pre></td></tr></table></figure>
<h3 id="4-Series的运算"><a href="#4-Series的运算" class="headerlink" title="4. Series的运算"></a>4. Series的运算</h3><p>(1) 适用于numpy的数组运算也适用于Series </p>
<p>(2) Series之间的运算</p>
<ul>
<li>在运算中自动对齐不同索引的数据</li>
<li>如果索引不对应，则补NaN</li>
<li>注意：要想保留所有的index，则需要使用.add()函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">s1</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>语文    <span class="number">150</span></span><br><span class="line">	数学    <span class="number">150</span></span><br><span class="line">	dtype: int64</span><br><span class="line">        </span><br><span class="line">s3</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a    <span class="number">1</span></span><br><span class="line">	b    <span class="number">2</span></span><br><span class="line">	Name: 张三, dtype: int64</span><br><span class="line">            </span><br><span class="line">s1 + s3 <span class="comment"># 两个Series进行加和时，如果索引不对应，返回值 nan</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a    NaN</span><br><span class="line">	b    NaN</span><br><span class="line">	语文   NaN</span><br><span class="line">	数学   NaN</span><br><span class="line">	dtype: float64</span><br><span class="line"></span><br><span class="line"><span class="comment"># 索引不对应 就出NaN 如果不喜欢这样可以调用 series自身的add（）方法</span></span><br><span class="line">s1.add(s3)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a       <span class="number">1.0</span></span><br><span class="line">	b       <span class="number">2.0</span></span><br><span class="line">	语文    <span class="number">150.0</span></span><br><span class="line">	数学    <span class="number">150.0</span></span><br><span class="line">    dtype: float64</span><br></pre></td></tr></table></figure>
<h2 id="DataFrame（数据帧）"><a href="#DataFrame（数据帧）" class="headerlink" title="DataFrame（数据帧）"></a>DataFrame（数据帧）</h2><p>DataFrame是一个【表格型】的数据结构，可以看做是【由Series组成的字典】（共用同一个索引）。DataFrame由按一定顺序排列的多列数据组成。设计初衷是将Series的使用场景从一维拓展到多维。DataFrame既有行索引，也有列索引。</p>
<ul>
<li>行索引：index</li>
<li>列索引：columns</li>
<li>值：values（numpy的二维数组）</li>
</ul>
<p><em>pandas</em>中的<code>DataFrame</code>可以使用以下构造函数创建 -</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pandas.DataFrame( data, index, columns, dtype, copy)</span><br></pre></td></tr></table></figure>
<p>构造函数的参数如下 -</p>
<table>
<thead>
<tr>
<th>编号</th>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>data</code></td>
<td>数据采取各种形式，如:<code>ndarray</code>，<code>series</code>，<code>map</code>，<code>lists</code>，<code>dict</code>，<code>constant</code>和另一个<code>DataFrame</code>。</td>
</tr>
<tr>
<td>2</td>
<td><code>index</code></td>
<td>对于<strong>行标签</strong>，要用于结果帧的索引是可选缺省值<code>np.arrange(n)</code>，如果没有传递索引值。</td>
</tr>
<tr>
<td>3</td>
<td><code>columns</code></td>
<td>对于<strong>列标签</strong>，可选的默认语法是 - <code>np.arange(n)</code>。 这只有在没有索引传递的情况下才是这样。</td>
</tr>
<tr>
<td>4</td>
<td><code>dtype</code></td>
<td>每列的数据类型。</td>
</tr>
<tr>
<td>5</td>
<td><code>copy</code></td>
<td>如果默认值为<code>False</code>，则此命令(或任何它)用于复制数据。</td>
</tr>
</tbody>
</table>
<h3 id="1-DataFrame的创建"><a href="#1-DataFrame的创建" class="headerlink" title="1. DataFrame的创建"></a>1. DataFrame的创建</h3><p>最常用的方法是传递一个字典来创建。DataFrame以字典的键作为每一【列】的名称，以字典的值（一个数组）作为每一列。</p>
<p>此外，DataFrame会自动加上每一行的索引（和Series一样）。</p>
<p>同Series一样，若传入的列与字典的键不匹配，则相应的值为NaN。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> DataFrame</span><br><span class="line"></span><br><span class="line">data = np.random.randint(<span class="number">0</span>,<span class="number">150</span>,size=(<span class="number">4</span>,<span class="number">4</span>))</span><br><span class="line">index = [<span class="string">'张三'</span>,<span class="string">'李四'</span>,<span class="string">'王五'</span>,<span class="string">'小六'</span>]</span><br><span class="line">df = DataFrame(data, index=index,columns=[<span class="string">'Math'</span>,<span class="string">'Chinese'</span>,<span class="string">'English'</span>,<span class="string">'Python'</span>])</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">			Math	Chinese	English	Python</span><br><span class="line">	张三		<span class="number">41</span>		<span class="number">47</span>		<span class="number">19</span>		<span class="number">114</span></span><br><span class="line">	李四		<span class="number">16</span>		<span class="number">43</span>		<span class="number">77</span>		<span class="number">115</span></span><br><span class="line">	王五		<span class="number">116</span>		<span class="number">148</span>		<span class="number">92</span>		<span class="number">74</span></span><br><span class="line">	小六		<span class="number">93</span>		<span class="number">72</span>		<span class="number">26</span>		<span class="number">59</span></span><br></pre></td></tr></table></figure>
<h3 id="2-DataFrame的索引"><a href="#2-DataFrame的索引" class="headerlink" title="2. DataFrame的索引"></a>2. DataFrame的索引</h3><p>(1) 对 <strong>列</strong> 进行索引</p>
<p>​    –  通过类似字典的方式</p>
<p>​    –  通过属性的方式</p>
<p>可以将DataFrame的列获取为一个Series。返回的Series拥有原DataFrame相同的索引，且name属性也已经设置好了，就是相应的列名。</p>
<p><em>每一行是一个样本   每一列是描述这个样本的维度</em>  </p>
<p>(2) 对 <strong>行</strong> 进行索引</p>
<p>​    –  使用.loc[]加index来进行行索引</p>
<p>​    –  使用.iloc[]加整数来进行行索引</p>
<p>同样返回一个Series，index为原来的columns。</p>
<p><strong>总结：</strong> </p>
<p>​    <u>columns 才能以索引的形式去找 df [“列名”] 、df.列名</u></p>
<p>​    <u>index 不能用索引的方式去找 只能用 loc[] 和 iloc[] 去定位内容</u> </p>
<p>(3) 对元素进行索引</p>
<p>​    –  使用列索引</p>
<p>​    –  使用行索引( iloc[3,1]相当于两个参数; iloc[[3,3]] 里面的[3,3]看做一个参数)</p>
<p>​    –  使用values属性（二维numpy数组）</p>
<p>【注意】 直接用中括号 [ ] 时：</p>
<ul>
<li>索引表示的是列索引</li>
<li>切片表示的是行切片</li>
</ul>
<h3 id="3-DataFrame的运算"><a href="#3-DataFrame的运算" class="headerlink" title="3. DataFrame的运算"></a>3. DataFrame的运算</h3><p>（1） DataFrame和数值的运算 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DataFrame + 1   # 所有内容都加一</span><br><span class="line"># 还有列与行</span><br></pre></td></tr></table></figure>
<p>（2） DataFrame与DataFrame之间的运算</p>
<p>同Series一样：</p>
<ul>
<li>在运算中自动对齐不同索引的数据</li>
<li>如果索引不对应，则补NaN</li>
</ul>
<p>下面是Python 操作符与pandas操作函数的对应表：</p>
<table>
<thead>
<tr>
<th>Python Operator</th>
<th>Pandas Method(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>+</code></td>
<td><code>add()</code></td>
</tr>
<tr>
<td><code>-</code></td>
<td><code>sub()</code>, <code>subtract()</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td><code>mul()</code>, <code>multiply()</code></td>
</tr>
<tr>
<td><code>/</code></td>
<td><code>truediv()</code>, <code>div()</code>, <code>divide()</code></td>
</tr>
<tr>
<td><code>//</code></td>
<td><code>floordiv()</code></td>
</tr>
<tr>
<td><code>%</code></td>
<td><code>mod()</code></td>
</tr>
<tr>
<td><code>**</code></td>
<td><code>pow()</code></td>
</tr>
</tbody>
</table>
<p>（3） DataFrame和Series之间的运算 </p>
<p>【重要】</p>
<ul>
<li><p>使用Python操作符：以行为单位操作（参数必须是行），对所有行都有效。（类似于numpy中二维数组与一维数组的运算，但可能出现NaN）</p>
</li>
<li><p>使用pandas操作函数：</p>
<p>​    –  axis=0：以列为单位操作（参数必须是列），对所有列都有效。</p>
<pre><code>--  axis=1：以行为单位操作（参数必须是行），对所有行都有效。
</code></pre></li>
</ul>
<h2 id="空数据处理"><a href="#空数据处理" class="headerlink" title="空数据处理"></a>空数据处理</h2><h3 id="检查缺失值"><a href="#检查缺失值" class="headerlink" title="检查缺失值"></a>检查缺失值</h3><p>​    <code>isnull()</code>和<code>notnull()</code>函数 ,它们也是Series和DataFrame对象的方法 </p>
<p>配合any使用，可以查看每一 行 / 列 是否存在空值 可以控制axis来改变查看方向 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df1 = DataFrame(data=np.random.randint(<span class="number">0</span>,<span class="number">20</span>,size=(<span class="number">5</span>,<span class="number">5</span>)),columns=list(<span class="string">"abcde"</span>))</span><br><span class="line"><span class="comment"># 如果想看每一行的 中 有没有空值 可以改变axis</span></span><br><span class="line">df1.isnull().any()</span><br><span class="line">df1.isnull().any(axis=<span class="number">0</span>) <span class="comment"># axis 默认是 0 是竖直方向</span></span><br><span class="line">df1.isnull().any(axis=<span class="number">1</span>) <span class="comment"># 通过这种方式 可以找到有空值的样本</span></span><br></pre></td></tr></table></figure>
<h3 id="过滤丢失数据"><a href="#过滤丢失数据" class="headerlink" title="过滤丢失数据"></a>过滤丢失数据</h3><p>​    <code>dropna()</code>: 过滤丢失数据</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dropna(axis, how)    <span class="comment"># axis 删除有NaN的行还是列，how 要有NaN就删 还是全都是NaN才删</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">df1.dropna() <span class="comment"># 如果有空值 就把整行都干掉</span></span><br><span class="line">df1.dropna(axis=<span class="number">0</span>) <span class="comment"># 默认是对行进行处理</span></span><br><span class="line">df1.dropna(axis=<span class="number">1</span>) <span class="comment"># 对有空值的列进行处理</span></span><br><span class="line"></span><br><span class="line">df1.dropna(how=<span class="string">"any"</span>) <span class="comment"># 只要有空值 就干掉</span></span><br><span class="line">df1.dropna(how=<span class="string">"all"</span>) <span class="comment"># 这一行所有的值都是空值 才干掉</span></span><br></pre></td></tr></table></figure>
<h3 id="填充缺少数据"><a href="#填充缺少数据" class="headerlink" title="填充缺少数据"></a>填充缺少数据</h3><p>​    <code>fillna()</code>函数可以用非空数据“填充”<code>NaN</code>值 </p>
<p>​    –  value ：指定填充的值<br>    –  method ：指定找前面还是找后面<br>    –  axis ：指定是横着找还是竖着找<br>    –  limit：限定往前/后找几个</p>
<p>注意：value参数是不能跟method参数共用的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">df1.fillna(value=0) # 遇到空值 可以设置成我们制定的值</span><br><span class="line">df1.fillna(value=10)  # 可以指定value值</span><br><span class="line"></span><br><span class="line"># pad / ffill 从前面找值来填充</span><br><span class="line"># backfill/ bfill 从后面找值来填充</span><br><span class="line">df1.fillna(method=&quot;ffill&quot;)</span><br><span class="line">df1.fillna(method=&quot;bfill&quot;)</span><br><span class="line"></span><br><span class="line">df1.fillna(method=&quot;ffill&quot;,axis=0) # axis 默认是0 竖直找</span><br><span class="line">df1.fillna(method=&quot;ffill&quot;,axis=1) # axis 1 水平找</span><br><span class="line"></span><br><span class="line">df1.fillna(method=&quot;ffill&quot;,limit=2) # 限制往前找几个</span><br></pre></td></tr></table></figure>
<h2 id="多层索引"><a href="#多层索引" class="headerlink" title="多层索引"></a>多层索引</h2><h3 id="多层行索引"><a href="#多层行索引" class="headerlink" title="多层行索引"></a>多层行索引</h3><p><strong>创建MultiIndex（分层索引）对象</strong> </p>
<p>该<code>MultiIndex</code>对象是标准<code>Index</code>对象的分层模拟 ，通常将轴标签存储在pandas对象中 </p>
<p>数组列表（使用 <code>MultiIndex.from_arrays</code>）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">index = pd.MultiIndex.from_arrays([[<span class="string">"期中"</span>,<span class="string">"期中"</span>,<span class="string">"期中"</span>,<span class="string">"期末"</span>,<span class="string">"期末"</span>,<span class="string">"期末"</span>],[<span class="string">"语文"</span>,<span class="string">"英语"</span>,<span class="string">"数学"</span>,<span class="string">"语文"</span>,<span class="string">"英语"</span>,<span class="string">"数学"</span>]])</span><br><span class="line"></span><br><span class="line">columns = [<span class="string">"张三"</span>,<span class="string">"李四"</span>,<span class="string">"王五"</span>,<span class="string">"赵柳"</span>]</span><br><span class="line">data = np.random.randint(<span class="number">0</span>,<span class="number">150</span>,size=(<span class="number">6</span>,<span class="number">4</span>))</span><br><span class="line">DataFrame(data,index,columns)</span><br></pre></td></tr></table></figure>
<p>元组数组（使用<code>MultiIndex.from_tuples</code>）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">index = pd.MultiIndex.from_tuples([(<span class="string">"期中"</span>,<span class="string">"语文"</span>),(<span class="string">"期中"</span>,<span class="string">"数学"</span>),(<span class="string">"期中"</span>,<span class="string">"英语"</span>),(<span class="string">"期末"</span>,<span class="string">"语文"</span>),(<span class="string">"期末"</span>,<span class="string">"数学"</span>),(<span class="string">"期末"</span>,<span class="string">"英语"</span>)])</span><br><span class="line"></span><br><span class="line">columns = [<span class="string">"张三"</span>,<span class="string">"李四"</span>,<span class="string">"王五"</span>,<span class="string">"赵柳"</span>]</span><br><span class="line">data = np.random.randint(<span class="number">0</span>,<span class="number">150</span>,size=(<span class="number">6</span>,<span class="number">4</span>))</span><br><span class="line">DataFrame(data,index,columns)</span><br></pre></td></tr></table></figure>
<p>交叉迭代集（使用 <code>MultiIndex.from_product</code>），<u>最简单，推荐使用</u> </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">index = pd.MultiIndex.from_product([[<span class="string">"期中"</span>,<span class="string">"期末"</span>],[<span class="string">"语文"</span>,<span class="string">"数学"</span>,<span class="string">"英语"</span>]])</span><br><span class="line"></span><br><span class="line">columns = [<span class="string">"张三"</span>,<span class="string">"李四"</span>,<span class="string">"王五"</span>,<span class="string">"赵柳"</span>]</span><br><span class="line">data = np.random.randint(<span class="number">0</span>,<span class="number">150</span>,size=(<span class="number">6</span>,<span class="number">4</span>))</span><br><span class="line">DataFrame(data,index,columns)</span><br></pre></td></tr></table></figure>
<h3 id="多层列索引"><a href="#多层列索引" class="headerlink" title="多层列索引"></a>多层列索引</h3><p>除了行索引index，列索引columns也能用同样的方法创建多层索引 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data = np.random.randint(0,150,size=(2,4))</span><br><span class="line">index= pd.MultiIndex.from_product([[&quot;期中&quot;,&quot;期末&quot;],[&quot;语文&quot;,&quot;英语&quot;]]) # 多层索引</span><br><span class="line">columns = [&quot;张三&quot;,&quot;李四&quot;] #单层索引</span><br><span class="line">df1 = DataFrame(data=data,index=columns,columns=index)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">			期中		期末</span><br><span class="line">		语文	英语	语文	英语</span><br><span class="line">张三		50	 12	   89	99</span><br><span class="line">李四		119	  9	   133	102</span><br></pre></td></tr></table></figure>
<h3 id="索引与切片操作"><a href="#索引与切片操作" class="headerlink" title="索引与切片操作"></a>索引与切片操作</h3><p><strong>Series的操作</strong> </p>
<p>【重要】对于Series来说，直接中括号 [ ] 与使用 .loc() 完全一样，推荐使用 .loc 中括号索引和切片。</p>
<p><strong>DataFrame的操作</strong> </p>
<p>(1) 可以直接使用列名称来进行列索引 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df1[&quot;期中&quot;][&quot;语文&quot;]</span><br></pre></td></tr></table></figure>
<p>(2) 使用行索引需要用 loc() 等函数 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df1.loc[&quot;张三&quot;]</span><br><span class="line">df1.iloc[0]</span><br></pre></td></tr></table></figure>
<h2 id="形状变换"><a href="#形状变换" class="headerlink" title="形状变换"></a>形状变换</h2><p><strong>stack()</strong> </p>
<p>​    columns -&gt; index 列标题变行标题（数据也会跟着标题走）</p>
<p>​    level 的值默认为-1（最内层）；取值从外往里 从0递增 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df.stack(level=<span class="number">0</span>) <span class="comment"># level 索引的级别 默认是-1 -1就是最里面的  level的值 从外到内 0 1 2 3</span></span><br></pre></td></tr></table></figure>
<p><strong>unstack()</strong> </p>
<p>​    index -&gt; columns 行标题变列标题（数据也会跟着标题走）</p>
<h2 id="聚合操作"><a href="#聚合操作" class="headerlink" title="聚合操作"></a>聚合操作</h2><table>
<thead>
<tr>
<th>功能</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>count()</code></td>
<td>Number of non-null observations</td>
</tr>
<tr>
<td><code>sum()</code></td>
<td>对 values 求和</td>
</tr>
<tr>
<td><code>mean()</code></td>
<td>values 的平均值</td>
</tr>
<tr>
<td><code>min()</code></td>
<td>求 values 最小值</td>
</tr>
<tr>
<td><code>max()</code></td>
<td>求 values 最大值</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 如果想对 行进行聚合操作 可以调整 axis</span><br><span class="line">df.sum(axis=0) # axis 默认值是0 是对列做加和</span><br><span class="line">df.sum(axis=1)</span><br></pre></td></tr></table></figure>
<h2 id="合并、连接"><a href="#合并、连接" class="headerlink" title="合并、连接"></a>合并、连接</h2><p>pandas的拼接分为两种：</p>
<ul>
<li>级联：pandas.concat， pandas.append (没有重复数据)</li>
<li>合并：pandas.merge， pandas.join (有重复数据)</li>
</ul>
<h3 id="pandas-concat-级联"><a href="#pandas-concat-级联" class="headerlink" title="pandas.concat()级联"></a>pandas.concat()级联</h3><p><strong>简单级联</strong> </p>
<p>pandas使用pandas.concat函数，与numpy.concatenate函数类似 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pd.concat(objs, axis=<span class="number">0</span>, join=<span class="string">'outer'</span>, join_axes=<span class="keyword">None</span>, ignore_index=<span class="keyword">False</span>,</span><br><span class="line">          keys=<span class="keyword">None</span>, levels=<span class="keyword">None</span>, names=<span class="keyword">None</span>, verify_integrity=<span class="keyword">False</span>,</span><br><span class="line">          copy=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<ol>
<li><p>objs 传入列表或者元素 里面是要拼接的DataFrame</p>
</li>
<li><p>axis 拼接的时候是沿着什么方向 默认值是0 纵向 如果是1就是横向</p>
</li>
<li><p>join 指定了拼接的方式 默认是outer</p>
<p>–  outer 外联 所有的列都会拼进来</p>
<p>–  inner 内联 只有那些两个DataFrame都有的列才会拼进来</p>
</li>
<li><p>join_axes 直接指定那些列要放进来</p>
</li>
<li><p>ignore_index=False 忽略原有索引创建新的索引 （如果索引有重复可以通过忽略原索引来重置）</p>
</li>
<li><p>keys 可以把不同的DataFrame分成多组 也可以用来解决index重复的问题</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">df3 = pd.concat((df1,df2)) <span class="comment">#默认 axis是0 是纵向拼接</span></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">	<span class="number">0</span>	<span class="number">1</span>	<span class="number">2</span></span><br><span class="line"><span class="number">0</span>	<span class="number">7</span>	<span class="number">4</span>	<span class="number">2</span></span><br><span class="line"><span class="number">1</span>	<span class="number">2</span>	<span class="number">7</span>	<span class="number">9</span></span><br><span class="line"><span class="number">2</span>	<span class="number">7</span>	<span class="number">6</span>	<span class="number">6</span></span><br><span class="line"><span class="number">0</span>	<span class="number">69</span>	<span class="number">93</span>	<span class="number">71</span></span><br><span class="line"><span class="number">1</span>	<span class="number">87</span>	<span class="number">25</span>	<span class="number">38</span></span><br><span class="line"><span class="number">2</span>	<span class="number">42</span>	<span class="number">15</span>	<span class="number">35</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以通过 重置索引的方式 去重新让索引不重复</span></span><br><span class="line"><span class="comment"># ignore_index=False 忽略原索引 建立新索引 默认是False</span></span><br><span class="line">df3 = pd.concat((df1,df2),ignore_index=<span class="keyword">True</span>)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">	<span class="number">0</span>	<span class="number">1</span>	<span class="number">2</span></span><br><span class="line"><span class="number">0</span>	<span class="number">7</span>	<span class="number">4</span>	<span class="number">2</span></span><br><span class="line"><span class="number">1</span>	<span class="number">2</span>	<span class="number">7</span>	<span class="number">9</span></span><br><span class="line"><span class="number">2</span>	<span class="number">7</span>	<span class="number">6</span>	<span class="number">6</span></span><br><span class="line"><span class="number">3</span>	<span class="number">69</span>	<span class="number">93</span>	<span class="number">71</span></span><br><span class="line"><span class="number">4</span>	<span class="number">87</span>	<span class="number">25</span>	<span class="number">38</span></span><br><span class="line"><span class="number">5</span>	<span class="number">42</span>	<span class="number">15</span>	<span class="number">35</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># axis=1 水平方向拼接</span></span><br><span class="line">df3 = pd.concat((df1,df2),ignore_index=<span class="keyword">True</span>,axis=<span class="number">1</span>)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">	<span class="number">0</span>	<span class="number">1</span>	<span class="number">2</span>	<span class="number">3</span>	<span class="number">4</span>	<span class="number">5</span></span><br><span class="line"><span class="number">0</span>	<span class="number">7</span>	<span class="number">4</span>	<span class="number">2</span>	<span class="number">69</span>	<span class="number">93</span>	<span class="number">71</span></span><br><span class="line"><span class="number">1</span>	<span class="number">2</span>	<span class="number">7</span>	<span class="number">9</span>	<span class="number">87</span>	<span class="number">25</span>	<span class="number">38</span></span><br><span class="line"><span class="number">2</span>	<span class="number">7</span>	<span class="number">6</span>	<span class="number">6</span>	<span class="number">42</span>	<span class="number">15</span>	<span class="number">35</span></span><br></pre></td></tr></table></figure>
<p><strong>不匹配级联</strong> </p>
<p>不匹配指的是级联的维度的索引不一致。例如纵向级联时列索引不一致，横向级联时行索引不一致 </p>
<p>有3种连接方式：</p>
<ul>
<li>外连接：补NaN（默认模式）    join=’outer’</li>
<li>内连接：只连接匹配的项         join=’inner’</li>
<li>连接指定轴 join_axes</li>
</ul>
<h3 id="pandas-append-函数添加"><a href="#pandas-append-函数添加" class="headerlink" title="pandas.append()函数添加"></a>pandas.append()函数添加</h3><p>由于在后面级联的使用非常普遍，因此有一个函数pandas.append()专门用于在后面添加 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df6.append(df7) # 只能是把行 纵向地 从后 往前 拼接</span><br></pre></td></tr></table></figure>
<h3 id="pandas-merge-合并"><a href="#pandas-merge-合并" class="headerlink" title="pandas.merge()合并"></a>pandas.merge()合并</h3><p>merge与concat的区别在于，merge需要依据某一共同的行或列来进行合并</p>
<p>使用pd.merge()合并时，会自动根据两者相同column名称的那一列，作为key来进行合并。</p>
<p>注意每一列元素的顺序不要求一致</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pd.merge(left, right, how=<span class="string">'inner'</span>, on=<span class="keyword">None</span>, left_on=<span class="keyword">None</span>, right_on=<span class="keyword">None</span>,</span><br><span class="line">left_index=<span class="keyword">False</span>, right_index=<span class="keyword">False</span>, sort=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<p>在这里，有以下几个参数可以使用 -</p>
<ul>
<li><p><em>left</em> - 一个DataFrame对象。</p>
</li>
<li><p><em>right</em> - 另一个DataFrame对象。</p>
</li>
<li><p><em>on</em> - 列(名称)连接，必须在左和右DataFrame对象中存在(找到)。</p>
</li>
<li><p><em>left_on</em> - 左侧DataFrame中的列用作键，可以是列名或长度等于DataFrame长度的数组。</p>
</li>
<li><p><em>right_on</em> - 来自右的DataFrame的列作为键，可以是列名或长度等于DataFrame长度的数组。</p>
</li>
<li><p><em>left_index</em> - 如果为<code>True</code>，则使用左侧DataFrame中的索引(行标签)作为其连接键。 在具有MultiIndex(分层)的DataFrame的情况下，级别的数量必须与来自右DataFrame的连接键的数量相匹配。</p>
</li>
<li><p><em>right_index</em> - 与右DataFrame的<em>left_index</em>具有相同的用法。</p>
</li>
<li><p><em>how</em> - 它是<em>left</em>, <em>right</em>, <em>outer</em>以及<em>inner</em>之中的一个，默认为内<em>inner</em>。 </p>
<p>–  inner  是取交集 两个都有的项目才出现</p>
<p>–  outer 是取并集 任何一个表格里出现的项目都会出现</p>
<p>–  left  左边的表格有多少项目 这里就有多少项目</p>
<p>–  right  右边的表格有多少项目 这里就有多少项目</p>
</li>
<li><p><em>sort</em> - 按照字典顺序通过连接键对结果DataFrame进行排序。默认为<code>True</code>，设置为<code>False</code>时，在很多情况下大大提高性能。</p>
</li>
</ul>
<p><strong>key的规范化</strong> </p>
<p>​    –  使用on=显式指定哪一列为key,当有多个key相同时使用</p>
<p>​    –  使用left_on和right_on指定左右两边的列作为key，当左右两边的key都不想等时使用</p>
<p><strong>内合并与外合并</strong> </p>
<p>​    –  内合并：只保留两者都有的key（默认模式）</p>
<p>​    –  外合并 how=’outer’：补NaN</p>
<p>​    –  左合并、右合并：how=’left’，how=’right’，</p>
<p><strong>列冲突的解决</strong> </p>
<p>​    –  当列冲突时，即有多个列名称相同时，需要使用on=来指定哪一个列作为key，配合suffixes指定冲突列名</p>
<p>​    –  可以使用suffixes=自己指定后缀</p>
<h2 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h2><p>Pandas I/O API是一套像<code>pd.read_csv()</code>一样返回<code>Pandas</code>对象的顶级读取器函数。</p>
<p>读取文本文件(或平面文件)的两个主要功能是<code>read_csv()</code>和<code>read_table()</code>。它们都使用相同的解析代码来智能地将表格数据转换为<code>DataFrame</code>对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pandas.read_csv(filepath_or_buffer, sep=&apos;,&apos;, delimiter=None, header=&apos;infer&apos;,</span><br><span class="line">names=None, index_col=None, usecols=None)</span><br></pre></td></tr></table></figure>
<p><strong>read.csv</strong> </p>
<p><code>read.csv</code>从csv文件中读取数据并创建一个<code>DataFrame</code>对象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">df=pd.read_csv(&quot;temp.csv&quot;)</span><br><span class="line">print (df)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>执行上面示例代码，得到以下结果 -</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   S.No    Name  Age       City  Salary</span><br><span class="line">0     1     Tom   28    Toronto   20000</span><br><span class="line">1     2     Lee   32   HongKong    3000</span><br><span class="line">2     3  Steven   43   Bay Area    8300</span><br><span class="line">3     4     Ram   38  Hyderabad    3900</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Shell</span><br></pre></td></tr></table></figure>
<p><strong>自定义索引</strong> </p>
<p>可以指定csv文件中的一列来使用<code>index_col</code>定制索引。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">df=pd.read_csv(&quot;temp.csv&quot;,index_col=[&apos;S.No&apos;])</span><br><span class="line">print (df)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>执行上面示例代码，得到以下结果 -</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">        Name  Age       City  Salary</span><br><span class="line">S.No                                </span><br><span class="line">1        Tom   28    Toronto   20000</span><br><span class="line">2        Lee   32   HongKong    3000</span><br><span class="line">3     Steven   43   Bay Area    8300</span><br><span class="line">4        Ram   38  Hyderabad    3900</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Shell</span><br></pre></td></tr></table></figure>
<p><strong>转换器</strong><br><code>dtype</code>的列可以作为字典传递。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">df = pd.read_csv(&quot;temp.csv&quot;, dtype=&#123;&apos;Salary&apos;: np.float64&#125;)</span><br><span class="line">print (df.dtypes)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>执行上面示例代码，得到以下结果 -</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">S.No        int64</span><br><span class="line">Name       object</span><br><span class="line">Age         int64</span><br><span class="line">City       object</span><br><span class="line">Salary    float64</span><br><span class="line">dtype: object</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Shell</span><br></pre></td></tr></table></figure>
<p>默认情况下，Salary列的<code>dtype</code>是<code>int</code>，但结果显示为<code>float</code>，因为我们明确地转换了类型。</p>
<p>因此，数据看起来像浮点数 -</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  S.No   Name   Age      City    Salary</span><br><span class="line">0   1     Tom   28    Toronto   20000.0</span><br><span class="line">1   2     Lee   32   HongKong    3000.0</span><br><span class="line">2   3  Steven   43   Bay Area    8300.0</span><br><span class="line">3   4     Ram   38  Hyderabad    3900.0</span><br></pre></td></tr></table></figure>
<p><strong>header_names</strong><br>使用<code>names</code>参数指定标题的名称。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">df=pd.read_csv(&quot;temp.csv&quot;, names=[&apos;a&apos;, &apos;b&apos;, &apos;c&apos;,&apos;d&apos;,&apos;e&apos;])</span><br><span class="line">print (df)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>执行上面示例代码，得到以下结果 -</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">      a       b    c          d       e</span><br><span class="line">0  S.No    Name  Age       City  Salary</span><br><span class="line">1     1     Tom   28    Toronto   20000</span><br><span class="line">2     2     Lee   32   HongKong    3000</span><br><span class="line">3     3  Steven   43   Bay Area    8300</span><br><span class="line">4     4     Ram   38  Hyderabad    3900</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Shell</span><br></pre></td></tr></table></figure>
<p>观察可以看到，标题名称附加了自定义名称，但文件中的标题还没有被消除。 现在，使用<code>header</code>参数来删除它。</p>
<p>如果标题不是第一行，则将行号传递给标题。这将跳过前面的行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">df=pd.read_csv(&quot;temp.csv&quot;,names=[&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;d&apos;,&apos;e&apos;],header=0)</span><br><span class="line">print (df)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>执行上面示例代码，得到以下结果 -</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   a       b   c          d      e</span><br><span class="line">0  1     Tom  28    Toronto  20000</span><br><span class="line">1  2     Lee  32   HongKong   3000</span><br><span class="line">2  3  Steven  43   Bay Area   8300</span><br><span class="line">3  4     Ram  38  Hyderabad   3900</span><br></pre></td></tr></table></figure>
<p><strong>skiprows</strong> </p>
<p><code>skiprows</code>跳过指定的行数。参考以下示例代码 -</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">df=pd.read_csv(&quot;temp.csv&quot;, skiprows=2)</span><br><span class="line">print (df)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Python</span><br></pre></td></tr></table></figure>
<p>执行上面示例代码，得到以下结果 -</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   2     Lee  32   HongKong  3000</span><br><span class="line">0  3  Steven  43   Bay Area  8300</span><br><span class="line">1  4     Ram  38  Hyderabad  3900</span><br></pre></td></tr></table></figure>
<h2 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h2><p>使用duplicated()函数检测重复的行，返回元素为布尔类型的Series对象，每个元素对应一行，如果该行不是第一次出现，则元素为True（是重复的）</p>
<ul>
<li>使用drop_duplicates()函数删除重复的行</li>
<li>使用duplicate()函数查看重复的行</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">	python	c++	 java</span><br><span class="line">A	<span class="number">100</span>	   <span class="number">100</span>	  <span class="number">100</span></span><br><span class="line">B	<span class="number">90</span>	   <span class="number">90</span>	  <span class="number">88</span></span><br><span class="line">C	<span class="number">100</span>	   <span class="number">100</span>	  <span class="number">100</span></span><br><span class="line">D	<span class="number">90</span>	   <span class="number">90</span>	  <span class="number">87</span></span><br><span class="line">E	<span class="number">100</span>	   <span class="number">100</span>	  <span class="number">100</span></span><br><span class="line"></span><br><span class="line">df.duplicated(keep=<span class="string">"first"</span>) <span class="comment"># 告诉我们 当前行是否重复, default 'first'</span></span><br><span class="line"><span class="comment"># 参数默认是 keep="first" 保留开始的 意思是如果发现很多重复的元素 第一个不算重复的 后面的才是</span></span><br><span class="line"><span class="comment"># 某一行重复 就返回True</span></span><br><span class="line">A    <span class="keyword">False</span></span><br><span class="line">B    <span class="keyword">False</span></span><br><span class="line">C     <span class="keyword">True</span></span><br><span class="line">D    <span class="keyword">False</span></span><br><span class="line">E     <span class="keyword">True</span></span><br><span class="line">dtype: bool</span><br><span class="line"></span><br><span class="line">df.duplicated(keep=<span class="string">"last"</span>) <span class="comment"># keep last 如果遇到重复的元素 最后一个不算重复的 前面的才算重复</span></span><br><span class="line"><span class="comment"># 这一行重复了 就是True</span></span><br><span class="line">A     <span class="keyword">True</span></span><br><span class="line">B    <span class="keyword">False</span></span><br><span class="line">C     <span class="keyword">True</span></span><br><span class="line">D    <span class="keyword">False</span></span><br><span class="line">E    <span class="keyword">False</span></span><br><span class="line">dtype: bool</span><br><span class="line">    </span><br><span class="line">df.duplicated(keep=<span class="keyword">False</span>) <span class="comment"># 只要有和别人完全一样的 不管在开头还是结尾 都算重复</span></span><br><span class="line"><span class="comment"># 这一行如果是重复的就返回 True</span></span><br><span class="line">A     <span class="keyword">True</span></span><br><span class="line">B    <span class="keyword">False</span></span><br><span class="line">C     <span class="keyword">True</span></span><br><span class="line">D    <span class="keyword">False</span></span><br><span class="line">E     <span class="keyword">True</span></span><br><span class="line">dtype: bool</span><br></pre></td></tr></table></figure>
<h2 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h2><h2 id="映射"><a href="#映射" class="headerlink" title="映射"></a>映射</h2><p>映射的含义：创建一个映射关系列表，把values元素和一个特定的标签或者字符串绑定</p>
<p>包含三种操作：</p>
<ul>
<li>replace()函数：替换元素</li>
<li>最重要：map()函数：新建一列</li>
<li>rename()函数：替换索引</li>
</ul>
<h3 id="replace-函数：替换元素"><a href="#replace-函数：替换元素" class="headerlink" title="replace()函数：替换元素"></a>replace()函数：替换元素</h3><p>使用replace()函数，对values进行替换操作 </p>
<p> <strong>Series替换操作</strong> </p>
<p>单值替换</p>
<ul>
<li>普通替换</li>
<li>字典替换(推荐）</li>
</ul>
<p>多值替换</p>
<ul>
<li>列表替换</li>
<li>字典替换（推荐）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单值替换 普通替换</span></span><br><span class="line">s1.replace(to_replace=<span class="string">"peppa"</span>,value=<span class="string">"佩琪"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 单值替换 字典替换（ ）</span></span><br><span class="line">s1.replace(&#123;<span class="string">"chengdu"</span>:<span class="string">"成都"</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多值替换 列表替换 s1.replace([要替换的值1,要替换的值2,.....],[替换成什么1,替换成什么2,....])</span></span><br><span class="line">s1.replace([<span class="number">100</span>,np.nan],[<span class="string">"满分"</span>,<span class="string">"空值"</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多值替换 字典替换（ &#123; 要替换的值:替换成什么,要替换的值:替换成什么 &#125; ）</span></span><br><span class="line">s1.replace(&#123;<span class="number">100</span>:<span class="string">"满分"</span>,<span class="string">"peppa"</span>:<span class="string">"佩琪"</span>&#125;)</span><br></pre></td></tr></table></figure>
<p>Series参数说明：</p>
<ul>
<li>method：对指定的值使用相邻的值填充</li>
<li>limit：设定填充次数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果指定value不好 还可以找值来填充</span></span><br><span class="line">s2.replace(to_replace=<span class="number">100</span>,method=<span class="string">"bfill"</span>) <span class="comment"># 从后面找值来替换当前值</span></span><br><span class="line">s2.replace(to_replace=<span class="number">100</span>,method=<span class="string">"ffill"</span>) <span class="comment"># 从前面找</span></span><br><span class="line">s2.replace(to_replace=<span class="number">100</span>,method=<span class="string">"ffill"</span>,limit=<span class="number">1</span>) <span class="comment"># limit 指定是最多往前或者往后 找几个 如果找不到就不填充了 # limit 默认是None不限制</span></span><br></pre></td></tr></table></figure>
<p><strong>DataFrame替换操作</strong> </p>
<p>单值替换</p>
<ul>
<li>普通替换</li>
<li>按列指定单值替换{列标签：目标值}</li>
</ul>
<p>多值替换</p>
<ul>
<li>列表替换</li>
<li>单字典替换（推荐）</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 普通的单值替换</span></span><br><span class="line">df.replace(to_replace=<span class="string">'Beijing'</span>,value=<span class="string">'北京'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 按列指定单值换目标值 (&#123;列索引,待替换值&#125;,目标值)</span></span><br><span class="line">df.replace(&#123;<span class="number">4</span>:<span class="string">'Beijing'</span>&#125;,<span class="string">'首都'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多值替换 列表进替换</span></span><br><span class="line"><span class="comment"># replace([要替换的1，要替换的2...],[替换成1，替换成2])</span></span><br><span class="line">df.replace([<span class="number">66</span>,<span class="string">'甲'</span>,<span class="string">'shanghai'</span>],[<span class="number">100</span>,<span class="string">'first'</span>,<span class="string">'上海'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># replace(&#123;要替换的1：替换成的值1，要替换的2：替换成的值2，...&#125;) 可以将没有的值也放在这里 不会报错 将来可以整个项目使用一个过滤器</span></span><br><span class="line">df.replace(&#123;<span class="number">66</span>:<span class="number">100</span>,<span class="string">'乙'</span>:<span class="string">'second'</span>,<span class="string">'Beijing'</span>:<span class="string">'BEIJING'</span>,<span class="string">'没有的值'</span>:<span class="string">'也可以放'</span>&#125;)</span><br><span class="line"><span class="comment"># 我们可以在 字典里面写很多值 字典中的值即使找不到也不会报错</span></span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：DataFrame中，无法使用method和limit参数 </p>
<h3 id="map-函数：新建一列"><a href="#map-函数：新建一列" class="headerlink" title="map()函数：新建一列"></a>map()函数：新建一列</h3><ul>
<li>map(字典) 字典的键要足以匹配所有的数据，否则出现NaN</li>
<li>map()可以映射新一列数据</li>
<li>map()中可以使用lambd表达式</li>
<li>map()中可以使用方法，可以是自定义的方法</li>
</ul>
<p><strong>注意</strong> map()中不能使用sum之类的函数，for循环</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	姓名	语文	数学	python	php</span><br><span class="line">0	小明	 90	  98	  90	98</span><br><span class="line">1	小红	 44	  89	  44	89</span><br><span class="line">2	小芳	 98	  90	  90	98</span><br><span class="line">3	小李	 89	  44	  44	89</span><br><span class="line">4	李元芳	78	 98	     98	    87</span><br><span class="line">5	狄仁杰	66	 44	     44	    89</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 映射字典</span><br><span class="line">map_dic = &#123;&apos;小明&apos;:&apos;北京&apos;,&apos;小红&apos;:&apos;上海&apos;,&apos;小芳&apos;:&apos;北京&apos;,</span><br><span class="line">           &apos;小李&apos;:&apos;广州&apos;,&apos;李元芳&apos;:&apos;成都&apos;,&apos;狄仁杰&apos;:&apos;成都&apos;&#125;</span><br><span class="line">score[&quot;姓名&quot;]</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">0     小明</span><br><span class="line">1     小红</span><br><span class="line">2     小芳</span><br><span class="line">3     小李</span><br><span class="line">4    李元芳</span><br><span class="line">5    狄仁杰</span><br><span class="line">Name: 姓名, dtype: object</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># map函数不是DataFrame的方法，而是Sereis对象的方法</span><br><span class="line"># 可以传入映射字典</span><br><span class="line">score[&quot;姓名&quot;].map(map_dic)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">0    北京</span><br><span class="line">1    上海</span><br><span class="line">2    北京</span><br><span class="line">3    广州</span><br><span class="line">4    成都</span><br><span class="line">5    成都</span><br><span class="line">Name: 姓名, dtype: object</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">score[&quot;所在城市&quot;] = score[&quot;姓名&quot;].map(map_dic) # 可以传入字典</span><br><span class="line">score</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">	姓名	语文	数学	python	php	所在城市</span><br><span class="line">0	小明	90	98	90	98	北京</span><br><span class="line">1	小红	44	89	44	89	上海</span><br><span class="line">2	小芳	98	90	90	98	北京</span><br><span class="line">3	小李	89	44	44	89	广州</span><br><span class="line">4	李元芳	78	98	98	87	成都</span><br><span class="line">5	狄仁杰	66	44	44	89	成都</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 还可以传入 拉姆达表达式 如 lambda x:x+10</span><br><span class="line">score[&quot;python&quot;]= score[&quot;python&quot;].map(lambda x:x+10)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"></span><br><span class="line">姓名	语文	数学	python	php	所在城市</span><br><span class="line">0	小明	90	98	100	18	北京</span><br><span class="line">1	小红	44	89	54	9	上海</span><br><span class="line">2	小芳	98	90	100	18	北京</span><br><span class="line">3	小李	89	44	54	9	广州</span><br><span class="line">4	李元芳	78	98	108	7	成都</span><br><span class="line">5	狄仁杰	66	44	54	9	成都</span><br></pre></td></tr></table></figure>
<h3 id="rename-函数：替换索引"><a href="#rename-函数：替换索引" class="headerlink" title="rename()函数：替换索引"></a>rename()函数：替换索引</h3><p>对DataFrame的索引名进行更改 , 仍然是新建一个字典 </p>
<p>使用rename()函数替换行索引</p>
<ul>
<li>index 替换行索引</li>
<li>columns 替换列索引</li>
<li>level 指定多维索引的维度</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">score.rename(map_dic) # 默认是替换 行的名称</span><br><span class="line"></span><br><span class="line">score.rename(columns=map_dic) # 指定columns可以对列名称进行替换</span><br><span class="line">score.rename(columns=map_dic,level=0) # 通过level参数 可以指定具体对哪一层级进行替换  </span><br><span class="line">score.rename(columns=map_dic,level=1) # 0 是最外层</span><br></pre></td></tr></table></figure>
<h2 id="异常检测和过滤"><a href="#异常检测和过滤" class="headerlink" title="异常检测和过滤"></a>异常检测和过滤</h2><p>使用 df.describe() 函数查看每一列的描述性统计量 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">data = np.random.randn(<span class="number">1000</span>,<span class="number">5</span>)</span><br><span class="line">df = DataFrame(data)</span><br><span class="line">df.describe() </span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">			<span class="number">0</span>		   <span class="number">1</span>		 <span class="number">2</span>		     <span class="number">3</span>			<span class="number">4</span></span><br><span class="line">count	<span class="number">1000.000000</span>	<span class="number">1000.000000</span>	<span class="number">1000.000000</span>	<span class="number">1000.000000</span>	<span class="number">1000.000000</span></span><br><span class="line">mean	<span class="number">0.019615</span>	<span class="number">0.008978</span>	<span class="number">0.002853</span>	<span class="number">0.014141</span>	<span class="number">-0.008822</span></span><br><span class="line">std		<span class="number">0.988672</span>	<span class="number">1.013836</span>	<span class="number">1.010433</span>	<span class="number">1.020105</span>	<span class="number">1.023155</span></span><br><span class="line">min		<span class="number">-2.842544</span>	<span class="number">-3.892657</span>	<span class="number">-2.630116</span>	<span class="number">-3.175475</span>	<span class="number">-3.860242</span></span><br><span class="line"><span class="number">25</span>%		<span class="number">-0.679723</span>	<span class="number">-0.656524</span>	<span class="number">-0.695306</span>	<span class="number">-0.675029</span>	<span class="number">-0.665006</span></span><br><span class="line"><span class="number">50</span>%		<span class="number">0.025267</span>	<span class="number">-0.005455</span>	<span class="number">-0.053128</span>	<span class="number">-0.030491</span>	<span class="number">-0.016477</span></span><br><span class="line"><span class="number">75</span>%		<span class="number">0.718051</span>	<span class="number">0.732615</span>	<span class="number">0.701169</span>	<span class="number">0.702746</span>	<span class="number">0.660637</span></span><br><span class="line">max		<span class="number">2.832537</span>	<span class="number">3.205288</span>	<span class="number">3.456829</span>	<span class="number">3.537849</span>	<span class="number">3.125329</span></span><br></pre></td></tr></table></figure>
<p>使用std()函数可以求得DataFrame对象每一列的标准差 </p>
<p>根据每一列或行的标准差，对DataFrame元素进行过滤。</p>
<p>借助any()或all()函数, 测试是否有True，有一个或以上返回True，反之返回False</p>
<p>对每一列应用筛选条件,去除标准差太大的数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 寻找异常数据 太大的 或者 太小的</span><br><span class="line">df.mean() # 各个列的平均值 是一个Series</span><br><span class="line">df - df.mean() # DataFrame - Series DataFrame中的每一行都和Series做减法 对应的列相减</span><br><span class="line">df - df.mean() &gt; 3*df.std()</span><br><span class="line">(df - df.mean() &gt; 3*df.std()).any()</span><br><span class="line">(df - df.mean() &gt; 3*df.std()).any(axis=1)</span><br><span class="line">df[(df - df.mean() &gt; 3*df.std()).any(axis=1)] #找到异常的行</span><br></pre></td></tr></table></figure>
<p>删除特定索引df.drop(labels,inplace = True) </p>
<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><p><em>Pandas</em>有两种排序方式，它们分别是 -</p>
<ul>
<li>按标签</li>
<li>按实际值</li>
</ul>
<p><strong>按标签排序</strong> </p>
<p>使用<code>sort_index()</code>方法，通过传递<code>axis</code>参数和排序顺序，可以对<code>DataFrame</code>进行排序。 默认情况下，按照升序对行标签进行排序。</p>
<p><strong>按列排列</strong> </p>
<p>通过传递<code>axis</code>参数值为<code>0</code>或<code>1</code>，可以对列标签进行排序。 默认情况下，<code>axis = 0</code>，逐行排列。来看看下面的例子来理解这个概念。</p>
<p><strong>按值排序</strong> </p>
<p>像索引排序一样，<code>sort_values()</code>是按值排序的方法。它接受一个<code>by</code>参数，它将使用要与其排序值的<code>DataFrame</code>的列名称。</p>
<p>排序算法</p>
<p><code>sort_values()</code>提供了从<code>mergeesort</code>，<code>heapsort</code>和<code>quicksort</code>中选择算法的一个配置。<code>Mergesort</code>是唯一稳定的算法。</p>
<p><strong>使用.take()函数排序</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- take()函数接受一个索引列表，用数字表示</span><br><span class="line">- eg:df.take([1,3,4,2,5])</span><br></pre></td></tr></table></figure>
<p>可以借助np.random.permutation()函数随机排序使用.take()函数排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- take()函数接受一个索引列表，用数字表示</span><br><span class="line">- eg:df.take([1,3,4,2,5])</span><br></pre></td></tr></table></figure>
<p>可以借助np.random.permutation()函数随机排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">data = np.random.randint(<span class="number">0</span>,<span class="number">100</span>,size=(<span class="number">5</span>,<span class="number">5</span>))</span><br><span class="line">index = list(<span class="string">'ABCDE'</span>)</span><br><span class="line">columns = list(<span class="string">'甲乙丙丁戊'</span>)</span><br><span class="line">df = DataFrame(data=data,index=index,columns=columns)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">	甲  乙   丙  丁	 戊</span><br><span class="line">A	<span class="number">27</span>	<span class="number">11</span>	<span class="number">28</span>	<span class="number">69</span>	<span class="number">12</span></span><br><span class="line">B	<span class="number">46</span>	<span class="number">15</span>	<span class="number">31</span>	<span class="number">19</span>	<span class="number">28</span></span><br><span class="line">C	<span class="number">22</span>	<span class="number">76</span>	<span class="number">3</span>	<span class="number">17</span>	<span class="number">98</span></span><br><span class="line">D	<span class="number">28</span>	<span class="number">91</span>	<span class="number">73</span>	<span class="number">72</span>	<span class="number">65</span></span><br><span class="line">E	<span class="number">18</span>	<span class="number">46</span>	<span class="number">22</span>	<span class="number">40</span>	<span class="number">64</span></span><br><span class="line"></span><br><span class="line">df.take([<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>]) <span class="comment"># 按照索引去取行 顺序随意 还可以重复 还可以不完全</span></span><br><span class="line">	甲  乙   丙  丁	 戊</span><br><span class="line">D	<span class="number">28</span>	<span class="number">91</span>	<span class="number">73</span>	<span class="number">72</span>	<span class="number">65</span></span><br><span class="line">D	<span class="number">28</span>	<span class="number">91</span>	<span class="number">73</span>	<span class="number">72</span>	<span class="number">65</span></span><br><span class="line">D	<span class="number">28</span>	<span class="number">91</span>	<span class="number">73</span>	<span class="number">72</span>	<span class="number">65</span></span><br><span class="line">D	<span class="number">28</span>	<span class="number">91</span>	<span class="number">73</span>	<span class="number">72</span>	<span class="number">65</span></span><br><span class="line"></span><br><span class="line">df.take(np.random.permutation(<span class="number">5</span>)) <span class="comment"># 随机排序 （行不会少 也不会重复 只是顺序随机变换）</span></span><br><span class="line"></span><br><span class="line">	甲  乙   丙  丁	 戊</span><br><span class="line">D	<span class="number">28</span>	<span class="number">91</span>	<span class="number">73</span>	<span class="number">72</span>	<span class="number">65</span></span><br><span class="line">B	<span class="number">46</span>	<span class="number">15</span>	<span class="number">31</span>	<span class="number">19</span>	<span class="number">28</span></span><br><span class="line">A	<span class="number">27</span>	<span class="number">11</span>	<span class="number">28</span>	<span class="number">69</span>	<span class="number">12</span></span><br><span class="line">E	<span class="number">18</span>	<span class="number">46</span>	<span class="number">22</span>	<span class="number">40</span>	<span class="number">64</span></span><br><span class="line">C	<span class="number">22</span>	<span class="number">76</span>	<span class="number">3</span>	<span class="number">17</span>	<span class="number">98</span></span><br></pre></td></tr></table></figure>
<p><strong>随机抽样</strong> </p>
<p>当DataFrame规模足够大时，直接使用np.random.randint()函数，就配合take()函数实现随机抽样</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">np.random.randint(<span class="number">0</span>,<span class="number">5</span>,size=<span class="number">2</span>)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">array([<span class="number">2</span>, <span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">df.take(np.random.randint(<span class="number">0</span>,<span class="number">5</span>,size=<span class="number">2</span>)) <span class="comment"># 随机抽样</span></span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">	甲  乙   丙  丁	 戊</span><br><span class="line">D	<span class="number">28</span>	<span class="number">91</span>	<span class="number">73</span>	<span class="number">72</span>	<span class="number">65</span></span><br><span class="line">C	<span class="number">22</span>	<span class="number">76</span>	<span class="number">3</span>	<span class="number">17</span>	<span class="number">98</span></span><br></pre></td></tr></table></figure>
<h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><p>数据分类处理：</p>
<ul>
<li>分组：先把数据分为几组</li>
<li>用函数处理：为不同组的数据应用不同的函数以转换数据</li>
<li>合并：把不同组得到的结果合并起来</li>
</ul>
<p>数据分类处理的核心：</p>
<p>​    –  groupby()函数</p>
<p>​    –  groups属性查看分组情况</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">df = DataFrame(&#123;&apos;item&apos;:[&apos;苹果&apos;,&apos;香蕉&apos;,&apos;橘子&apos;,&apos;香蕉&apos;,&apos;橘子&apos;,&apos;苹果&apos;,&apos;苹果&apos;],</span><br><span class="line">                &apos;price&apos;:[4,3,3,2.5,4,2,2.8],</span><br><span class="line">               &apos;color&apos;:[&apos;red&apos;,&apos;yellow&apos;,&apos;yellow&apos;,&apos;green&apos;,&apos;green&apos;,&apos;green&apos;,&apos;yello&apos;],</span><br><span class="line">               &apos;weight&apos;:[12,20,50,30,20,44,37]&#125;)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">	item	price	color	weight</span><br><span class="line">0	苹果	   4.0	   red	    12</span><br><span class="line">1	香蕉	   3.0	   yellow	20</span><br><span class="line">2	橘子	   3.0	   yellow	50</span><br><span class="line">3	香蕉	   2.5	   green	30</span><br><span class="line">4	橘子	   4.0	   green	20</span><br><span class="line">5	苹果	   2.0	   green	44</span><br><span class="line">6	苹果	   2.8	   yello	37</span><br></pre></td></tr></table></figure>
<p>根据item分组,通过groups属性查看结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df.groupby(&quot;item&quot;).groups</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">&#123;&apos;橘子&apos;: Int64Index([2, 4], dtype=&apos;int64&apos;),</span><br><span class="line"> &apos;苹果&apos;: Int64Index([0, 5, 6], dtype=&apos;int64&apos;),</span><br><span class="line"> &apos;香蕉&apos;: Int64Index([1, 3], dtype=&apos;int64&apos;)&#125;</span><br></pre></td></tr></table></figure>
<p>获取weight的总和</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df.groupby(&quot;item&quot;)[&quot;weight&quot;].sum() #各类水果的总重量</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">item</span><br><span class="line">橘子    70</span><br><span class="line">苹果    93</span><br><span class="line">香蕉    50</span><br><span class="line">Name: weight, dtype: int64</span><br></pre></td></tr></table></figure>
<h1 id="Matplotlib-1"><a href="#Matplotlib-1" class="headerlink" title="Matplotlib"></a>Matplotlib</h1><p>matplotlib在Python中应用最多的2D图像的绘图工具包，使用matplotlib能够非常简单的可视化数据。在matplotlib中使用最多的模块就是pyplot。pyplot非常接近Matlab的绘图实现，而且大多数的命令及其类似Matlab.当然，与Matlab类似，需要很多的数学运算，因此numpy这个组件同样是必不可少的。所以很多人说python+matplotlib+numpy就是MATLAB。</p>
<h2 id="一、Matplotlib基础知识"><a href="#一、Matplotlib基础知识" class="headerlink" title="一、Matplotlib基础知识"></a>一、Matplotlib基础知识</h2><p>Matplotlib中的基本图表包括的元素</p>
<ul>
<li>x轴和y轴–axis  ， 水平和垂直的轴线</li>
<li>轴标签–axisLabel  ， 水平和垂直的轴标签</li>
<li>x轴和y轴刻度–tick  ， 刻度标示坐标轴的分隔，包括最小刻度和最大刻度</li>
<li>x轴和y轴刻度标签–tick label  ， 表示特定坐标轴的值</li>
<li>绘图区域（坐标系）–axes  ， 实际绘图的区域</li>
<li>画布–figure  ， 呈现所有的坐标系</li>
</ul>
<p><img src="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/matplotlib%E5%9B%BE%E5%83%8F%E7%BB%84%E6%88%90.PNG" alt=""></p>
<h3 id="只含单一曲线的图"><a href="#只含单一曲线的图" class="headerlink" title="只含单一曲线的图"></a>只含单一曲线的图</h3><p>1、可以使用多个plot函数（推荐），在一个图中绘制多个曲线</p>
<p>2、也可以在一个plot函数中传入多对X,Y值，在一个图中绘制多个曲线</p>
<h3 id="设置子画布"><a href="#设置子画布" class="headerlink" title="设置子画布"></a>设置子画布</h3><p>axes = plt.subplot()</p>
<h3 id="网格线"><a href="#网格线" class="headerlink" title="网格线"></a>网格线</h3><p>绘制正弦余弦</p>
<p>使用plt.grid方法可以开启网格线，使用plt面向对象的方法，创建多个子图显示不同网格线 </p>
<p><img src="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/grid.png" alt=""></p>
<ul>
<li>lw代表linewidth，线的粗细</li>
<li>alpha表示线的明暗程度</li>
<li>color代表颜色</li>
<li>axis显示轴向</li>
</ul>
<h3 id="坐标轴界限"><a href="#坐标轴界限" class="headerlink" title="坐标轴界限"></a>坐标轴界限</h3><p>plt.axis([xmin,xmax,ymin,ymax])</p>
<p>plt.axis(‘xxx’) ‘tight’、’off’、’equal’……</p>
<p>设置坐标轴类型<br>关闭坐标轴</p>
<p><strong>xlim方法和ylim方法</strong> </p>
<p>除了plt.axis方法，还可以通过xlim，ylim方法设置坐标轴范围</p>
<h3 id="坐标轴标签"><a href="#坐标轴标签" class="headerlink" title="坐标轴标签"></a>坐标轴标签</h3><p>xlabel方法和ylabel方法<br>plt.ylabel(‘y = x^2 + 5’,rotation = 60)旋转</p>
<ul>
<li>color 标签颜色</li>
<li>fontsize 字体大小</li>
<li>rotation 旋转角度</li>
</ul>
<h3 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h3><p>plt.title()方法</p>
<ul>
<li>loc {left,center,right}</li>
<li>color 标签颜色</li>
<li>fontsize 字体大小</li>
<li>rotation 旋转角度</li>
</ul>
<h3 id="图例"><a href="#图例" class="headerlink" title="图例"></a>图例</h3><p><strong>legend方法</strong> </p>
<p>两种传参方法：</p>
<ul>
<li>分别在plot函数中增加label参数,再调用legend()方法显示</li>
<li>直接在legend方法中传入字符串列表</li>
</ul>
<p><img src="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/legend.png" alt=""></p>
<h3 id="loc参数"><a href="#loc参数" class="headerlink" title="loc参数"></a>loc参数</h3><ul>
<li>loc参数用于设置图例标签的位置，一般在legend函数内</li>
<li>matplotlib已经预定义好几种数字表示的位置</li>
</ul>
<table>
<thead>
<tr>
<th>字符串</th>
<th>数值</th>
<th>字符串</th>
<th>数值</th>
</tr>
</thead>
<tbody>
<tr>
<td>best</td>
<td>0</td>
<td>center left</td>
<td>6</td>
</tr>
<tr>
<td>upper right</td>
<td>1</td>
<td>center right</td>
<td>7</td>
</tr>
<tr>
<td>upper left</td>
<td>2</td>
<td>lower center</td>
<td>8</td>
</tr>
<tr>
<td>lower left</td>
<td>3</td>
<td>upper center</td>
<td>9</td>
</tr>
<tr>
<td>lower right</td>
<td>4</td>
<td>center</td>
<td>10</td>
</tr>
<tr>
<td>right</td>
<td>5</td>
<td></td>
</tr>
</tbody>
</table>
<p>loc参数可以是2元素的元组，表示图例左下角的坐标</p>
<ul>
<li>[0,0] 左下</li>
<li>[0,1] 左上</li>
<li>[1,0] 右下</li>
<li>[1,1] 右上</li>
</ul>
<p>图例也可以超过图的界限loc = (-0.1,0.9) </p>
<h3 id="ncol参数"><a href="#ncol参数" class="headerlink" title="ncol参数"></a>ncol参数</h3><p>ncol控制图例中有几列,在legend中设置ncol,需要设置loc</p>
<h3 id="linestyle、color、marker"><a href="#linestyle、color、marker" class="headerlink" title="linestyle、color、marker"></a>linestyle、color、marker</h3><p>修改线条样式</p>
<ul>
<li>linestyle(ls) 设置线的风格</li>
<li>linewidth(lw) 设置线宽</li>
<li>alpha 透明度</li>
<li>color 颜色</li>
<li>marker 点形</li>
<li>markersize 点大小</li>
<li>markeredagecolor 点的边界颜色</li>
<li>markeredagewidth 点的边界宽度</li>
<li>markerfacecolor 点的主体颜色</li>
</ul>
<h3 id="保存图片"><a href="#保存图片" class="headerlink" title="保存图片"></a>保存图片</h3><p>使用figure对象的savefig的函数</p>
<ul>
<li>filename<br>含有文件路径的字符串或Python的文件型对象。图像格式由文件扩展名推断得出，例如，.pdf推断出PDF，.png推断出PNG （“png”、“pdf”、“svg”、“ps”、“eps”……）</li>
<li>dpi<br>图像分辨率（每英寸点数），默认为100</li>
<li>facecolor<br>图像的背景色，默认为“w”（白色）</li>
</ul>
<h2 id="二、设置plot的风格和样式"><a href="#二、设置plot的风格和样式" class="headerlink" title="二、设置plot的风格和样式"></a>二、设置plot的风格和样式</h2><p>plot语句中支持除X,Y以外的参数，以字符串形式存在，来控制颜色、线型、点型等要素，语法形式为：<br>plt.plot(X, Y, ‘format’, …)</p>
<h3 id="点和线的样式"><a href="#点和线的样式" class="headerlink" title="点和线的样式"></a>点和线的样式</h3><p><strong>颜色</strong> </p>
<p>参数color或c</p>
<p><strong>颜色值的方式</strong> </p>
<p>别名 </p>
<ul>
<li>color=’r’</li>
</ul>
<p>合法的HTML颜色名 </p>
<ul>
<li>color = ‘red’</li>
</ul>
<table>
<thead>
<tr>
<th>颜色</th>
<th>别名</th>
<th>HTML颜色名</th>
<th>颜色</th>
<th>别名</th>
<th>HTML颜色名</th>
</tr>
</thead>
<tbody>
<tr>
<td>蓝色</td>
<td>b</td>
<td>blue</td>
<td>绿色</td>
<td>g</td>
<td>green</td>
</tr>
<tr>
<td>红色</td>
<td>r</td>
<td>red</td>
<td>黄色</td>
<td>y</td>
<td>yellow</td>
</tr>
<tr>
<td>青色</td>
<td>c</td>
<td>cyan</td>
<td>黑色</td>
<td>k</td>
<td>black</td>
</tr>
<tr>
<td>洋红色</td>
<td>m</td>
<td>magenta</td>
<td>白色</td>
<td>w</td>
<td>white</td>
</tr>
</tbody>
</table>
<p> HTML十六进制字符串</p>
<ul>
<li>color = ‘#eeefff’</li>
</ul>
<p>归一化到[0, 1]的RGB元组</p>
<ul>
<li>color = (0.3, 0.3, 0.4)</li>
</ul>
<p>jpg png 区别</p>
<p><strong>透明度</strong> </p>
<p>alpha参数</p>
<p><strong>背景色</strong> </p>
<p>设置背景色，通过plt.subplot()方法传入facecolor参数，来设置坐标系的背景色</p>
<p><strong>线型</strong> </p>
<p>参数linestyle或ls</p>
<table>
<thead>
<tr>
<th>线条风格</th>
<th>描述</th>
<th>线条风格</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘-‘</td>
<td>实线</td>
<td>‘:’</td>
<td>虚线</td>
</tr>
<tr>
<td>‘–’</td>
<td>破折线</td>
<td>‘steps’</td>
<td>阶梯线</td>
</tr>
<tr>
<td>‘-.’</td>
<td>点划线</td>
<td>‘None’ / ‘，’</td>
<td>什么都不画</td>
</tr>
</tbody>
</table>
<p><strong>不同宽度的破折线</strong> </p>
<p>dashes参数 eg.dashes = [20,50,5,2,10,5]</p>
<p>设置破折号序列各段的宽度</p>
<p><strong>点型</strong> </p>
<ul>
<li>marker 设置点形</li>
<li>markersize 设置点形大小</li>
</ul>
<table>
<thead>
<tr>
<th>标记</th>
<th>描述</th>
<th>标记</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘1’</td>
<td>一角朝下的三脚架</td>
<td>‘3’</td>
<td>一角朝左的三脚架</td>
</tr>
<tr>
<td>‘2’</td>
<td>一角朝上的三脚架</td>
<td>‘4’</td>
<td>一角朝右的三脚架</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>标记</th>
<th>描述</th>
<th>标记</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘s’</td>
<td>正方形</td>
<td>‘p’</td>
<td>五边形</td>
</tr>
<tr>
<td>‘h’</td>
<td>六边形1</td>
<td>‘H’</td>
<td>六边形2</td>
</tr>
<tr>
<td>‘8’</td>
<td>八边形</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>标记</th>
<th>描述</th>
<th>标记</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘.’</td>
<td>点</td>
<td>‘x’</td>
<td>X</td>
</tr>
<tr>
<td>‘*’</td>
<td>星号</td>
<td>‘+’</td>
<td>加号</td>
</tr>
<tr>
<td>‘,’</td>
<td>像素</td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>标记</th>
<th>描述</th>
<th>标记</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘o’</td>
<td>圆圈</td>
<td>‘D’</td>
<td>菱形</td>
</tr>
<tr>
<td>‘d’</td>
<td>小菱形</td>
<td>‘’,’None’,’ ‘,None</td>
<td>无</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>标记</th>
<th>描述</th>
<th>标记</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘_’</td>
<td>水平线</td>
<td>‘\</td>
<td>‘</td>
<td>竖线</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>标记</th>
<th>描述</th>
<th>标记</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>‘v’</td>
<td>一角朝下的三角形</td>
<td>‘&lt;’</td>
<td>一角朝左的三角形</td>
</tr>
<tr>
<td>‘^’</td>
<td>一角朝上的三角形</td>
<td>‘&gt;’</td>
<td>一角朝右的三角形</td>
</tr>
</tbody>
</table>
<p><strong>多参数连用</strong> </p>
<p>颜色、点型、线型，可以把几种参数写在一个字符串内进行设置 ‘r-.o’</p>
<p><strong>更多点和线的设置</strong> </p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>color或c</td>
<td>线的颜色</td>
<td>linestyle或ls</td>
<td>线型</td>
</tr>
<tr>
<td>linewidth或lw</td>
<td>线宽</td>
<td>marker</td>
<td>点型</td>
</tr>
<tr>
<td>markeredgecolor</td>
<td>点边缘的颜色</td>
<td>markeredgewidth</td>
<td>点边缘的宽度</td>
</tr>
<tr>
<td>markerfacecolor</td>
<td>点内部的颜色</td>
<td>markersize</td>
<td>点的大小</td>
</tr>
</tbody>
</table>
<p><strong>多个曲线同一设置</strong> </p>
<p>属性名声明，不可以多参数连用</p>
<p>plt.plot(x1, y1, x2, y2, fmt, …)</p>
<p><strong>多个曲线不同设置</strong> </p>
<p>多个都进行设置时，多参数连用 plt.plot(x1, y1, fmt1, x2, y2, fmt2, …)</p>
<p> <strong>三种设置方式</strong> </p>
<p><strong>向方法传入关键字参数</strong> </p>
<ul>
<li>import matplotlib as mpl</li>
</ul>
<p><strong>对实例使用一系列的setter方法</strong> </p>
<ul>
<li>plt.plot()方法返回一个包含所有线的列表，设置每一个线需要获取该线对象<ul>
<li>eg: lines = plt.plot();   line = lines[0]</li>
<li>line.set_linewith()</li>
<li>line.set_linestyle()</li>
<li>line.set_color()</li>
</ul>
</li>
</ul>
<p><strong>对坐标系使用一系列的setter方法</strong> </p>
<ul>
<li>axes = plt.subplot()获取坐标系<ul>
<li>set_title()</li>
<li>set_facecolor()</li>
<li>set_xticks、set_yticks 设置刻度值</li>
<li>set_xticklabels、set_yticklabels  设置刻度名称</li>
</ul>
</li>
</ul>
<h3 id="X、Y轴坐标刻度"><a href="#X、Y轴坐标刻度" class="headerlink" title="X、Y轴坐标刻度"></a>X、Y轴坐标刻度</h3><p>plt.xticks()和plt.yticks()方法</p>
<ul>
<li>需指定刻度值和刻度名称 plt.xticks([刻度列表],[名称列表])</li>
<li>支持fontsize、rotation、color等参数设置</li>
</ul>
<h2 id="三、2D图形"><a href="#三、2D图形" class="headerlink" title="三、2D图形"></a>三、2D图形</h2><h3 id="直方图"><a href="#直方图" class="headerlink" title="直方图"></a>直方图</h3><p>【直方图的参数只有一个x！！！不像条形图需要传入x,y】</p>
<p><code>hist()</code> 的参数</p>
<ul>
<li>bins<br>可以是一个bin数量的整数值，也可以是表示bin的一个序列。默认值为10</li>
<li>normed<br>如果值为True，直方图的值将进行归一化处理，形成概率密度，默认值为False</li>
<li>color<br>指定直方图的颜色。可以是单一颜色值或颜色的序列。如果指定了多个数据集合，颜色序列将会设置为相同的顺序。如果未指定，将会使用一个默认的线条颜色</li>
<li>orientation<br>通过设置orientation为horizontal创建水平直方图。默认值为vertical</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = np.random.randint(0,10,size=100)</span><br><span class="line">display(data)</span><br><span class="line"># horizontal vertical</span><br><span class="line">value = plt.hist(data,bins=10,rwidth=0.9,color=&apos;orange&apos;,orientation=&apos;vertical&apos;)</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/hist.png" alt=""></p>
<h3 id="条形图"><a href="#条形图" class="headerlink" title="条形图"></a>条形图</h3><p>【条形图有两个参数x,y】</p>
<ul>
<li>width 纵向设置条形宽度</li>
<li>height 横向设置条形高度</li>
</ul>
<p><code>bar()</code>横向条形图  、  <code>barh()</code>纵向条形图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 横向条形图</span><br><span class="line"># x index</span><br><span class="line"># height values</span><br><span class="line"># width  条形宽度</span><br><span class="line"># plt.bar(data1.index,data1.values,width=0.9)</span><br><span class="line"></span><br><span class="line"># 纵向条形图</span><br><span class="line"># y index</span><br><span class="line"># width values</span><br><span class="line"># height 条形宽度</span><br><span class="line">plt.barh(data1.index,data1.values,height=0.9)</span><br></pre></td></tr></table></figure>
<h3 id="饼图"><a href="#饼图" class="headerlink" title="饼图"></a>饼图</h3><p>【饼图也只有一个参数x！】</p>
<p>pie()<br>饼图适合展示各部分占总体的比例，条形图适合比较各部分的大小</p>
<p>普通各部分占满饼图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line"></span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">%matplotlib inline</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.pie([0.3,0.2,0.5])</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/pie1.png" alt=""></p>
<p>普通未占满饼图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.pie([0.3,0.1,0.5])</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/pie2.png" alt=""></p>
<p>饼图阴影、分裂等属性设置</p>
<ul>
<li>labels参数设置每一块的标签；</li>
<li>labeldistance参数设置标签距离圆心的距离（比例值,只能设置一个浮点小数）</li>
<li>autopct参数设置比例值的显示格式(%1.1f%%)；</li>
<li>pctdistance参数设置比例值文字距离圆心的距离</li>
<li>explode参数设置每一块顶点距圆形的长度（比例值,列表）；</li>
<li>colors参数设置每一块的颜色（列表）；</li>
<li>shadow参数为布尔值，设置是否绘制阴影</li>
<li>startangle参数设置饼图起始角度</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">plt.rcParams[&apos;font.sans-serif&apos;] = [&apos;SimHei&apos;] # 步骤一（替换sans-serif字体）</span><br><span class="line">plt.rcParams[&apos;axes.unicode_minus&apos;] = False   # 步骤二（解决坐标轴负数的负号显示问题）</span><br><span class="line"></span><br><span class="line">data = [4,2,3,1,1]</span><br><span class="line">values = plt.pie(data,labels=[&apos;小学&apos;,&apos;初中&apos;,&apos;高中&apos;,&apos;大学&apos;,&apos;现在&apos;],labeldistance=0.7,</span><br><span class="line">                autopct=&apos;%.2f%%&apos;,pctdistance=0.5,explode=[0,0,0,0,0.2],</span><br><span class="line">                 colors=[&apos;yellow&apos;,&apos;cyan&apos;,&apos;purple&apos;,&apos;orange&apos;,&apos;blue&apos;],shadow=True,</span><br><span class="line">                startangle=90)</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/pie3.png" alt=""></p>
<h3 id="散点图"><a href="#散点图" class="headerlink" title="散点图"></a>散点图</h3><p>【散点图需要两个参数x,y，但此时x不是表示x轴的刻度，而是每个点的横坐标！】</p>
<p><code>scatter()</code> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = np.linspace(0,2*np.pi,20)</span><br><span class="line">y = np.sin(x)</span><br><span class="line">plt.scatter(x,y)</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/scatter.png" alt=""></p>
<h2 id="四、图形内的文字、注释、箭头"><a href="#四、图形内的文字、注释、箭头" class="headerlink" title="四、图形内的文字、注释、箭头"></a>四、图形内的文字、注释、箭头</h2><p>控制文字属性的方法:</p>
<table>
<thead>
<tr>
<th>pyplot函数</th>
<th>API方法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>text()</td>
<td>mpl.axes.Axes.text()</td>
<td>在Axes对象的任意位置添加文字</td>
</tr>
<tr>
<td>xlabel()</td>
<td>mpl.axes.Axes.set_xlabel()</td>
<td>为X轴添加标签</td>
</tr>
<tr>
<td>ylabel()</td>
<td>mpl.axes.Axes.set_ylabel()</td>
<td>为Y轴添加标签</td>
</tr>
<tr>
<td>title()</td>
<td>mpl.axes.Axes.set_title()</td>
<td>为Axes对象添加标题</td>
</tr>
<tr>
<td>legend()</td>
<td>mpl.axes.Axes.legend()</td>
<td>为Axes对象添加图例</td>
</tr>
<tr>
<td>figtext()</td>
<td>mpl.figure.Figure.text()</td>
<td>在Figure对象的任意位置添加文字</td>
</tr>
<tr>
<td>suptitle()</td>
<td>mpl.figure.Figure.suptitle()</td>
<td>为Figure对象添加中心化的标题</td>
</tr>
<tr>
<td>annnotate()</td>
<td>mpl.axes.Axes.annotate()</td>
<td>为Axes对象添加注释（箭头可选）</td>
</tr>
</tbody>
</table>
<p>所有的方法会返回一个matplotlib.text.Text对象</p>
<h3 id="图形内的文字"><a href="#图形内的文字" class="headerlink" title="图形内的文字"></a>图形内的文字</h3><p>text()</p>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>annotate()</p>
<ul>
<li>xy参数设置箭头指示的位置</li>
<li>xytext参数设置注释文字的位置</li>
<li>arrowprops参数以字典的形式设置箭头的样式</li>
<li>width参数设置箭头长方形部分的宽度</li>
<li>headlength参数设置箭头尖端的长度，</li>
<li>headwidth参数设置箭头尖端底部的宽度</li>
<li>shrink参数设置箭头顶点、尾部与指示点、注释文字的距离（比例值），可以理解为控制箭头的长度</li>
</ul>
<h2 id="五、3D图"><a href="#五、3D图" class="headerlink" title="五、3D图"></a>五、3D图</h2><h3 id="曲面图"><a href="#曲面图" class="headerlink" title="曲面图"></a>曲面图</h3><p>导包</p>
<ul>
<li>from mpl_toolkits.mplot3d.axes3d import Axes3D</li>
</ul>
<p>使用mershgrid函数切割x,y轴</p>
<ul>
<li>X,Y = np.meshgrid(x, y)</li>
</ul>
<p>创建3d坐标系</p>
<ul>
<li>axes = plt.subplot(projection=’3d’)</li>
</ul>
<p>绘制3d图形</p>
<ul>
<li>p = axes.plot_surface(X,Y,Z,color=’red’,cmap=’summer’,rstride=5,cstride=5)</li>
</ul>
<p>添加colorbar</p>
<ul>
<li>plt.colorbar(p,shrink=0.5)</li>
</ul>
<h3 id="玫瑰图-极坐标条形图"><a href="#玫瑰图-极坐标条形图" class="headerlink" title="玫瑰图/极坐标条形图"></a>玫瑰图/极坐标条形图</h3><p>创建极坐标，设置polar属性</p>
<ul>
<li>plt.axes(polar = True)</li>
</ul>
<p>绘制极坐标条形图</p>
<ul>
<li>index = np.arange(-np.pi,np.pi,2*np.pi/6)</li>
<li>plt.bar(x=index ,height = [1,2,3,4,5,6] ,width = 2*np.pi/6)</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先设置子画布为极坐标画布</span></span><br><span class="line">plt.axes(polar=<span class="keyword">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 极坐标的索引需要使用弧度表示</span></span><br><span class="line"><span class="comment"># 由于在圆中，起始点和终点是一个点，所以在切分索引时，不要保留最后一个点</span></span><br><span class="line">index = np.linspace(<span class="number">0</span>,<span class="number">2</span>*np.pi,<span class="number">8</span>,endpoint=<span class="keyword">False</span>)</span><br><span class="line"></span><br><span class="line">values = np.array([<span class="number">10</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">2</span>,<span class="number">8</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>])</span><br><span class="line"><span class="comment"># 生成8个不同的颜色 [r,g,b]</span></span><br><span class="line">colors = np.random.random(size=(<span class="number">8</span>,<span class="number">3</span>))</span><br><span class="line"><span class="comment"># 扇形区域的半径，表示数值的大小，宽度使用width设置，默认值0.8</span></span><br><span class="line">plt.bar(x=index,height=values,width=<span class="number">0.8</span>,color=colors,align=<span class="string">'edge'</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://raw.githubusercontent.com/shuaixiaohao/shuaixiaohao.github.io/master/blog-image/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/%E6%9E%81%E5%9D%90%E6%A0%87%E5%9B%BE.png" alt=""></p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="冯  昊 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="冯  昊 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/numpy-pandas-Matplotlib/" rel="tag"># numpy,pandas,Matplotlib</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/12/15/Django/" rel="next" title="Django">
                <i class="fa fa-chevron-left"></i> Django
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
 	<div id="gitalk-container"></div>






  




        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/fenghao.png"
                alt="冯  昊" />
            
              <p class="site-author-name" itemprop="name">冯  昊</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/shuaixiaohao" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:fenghao1994@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/realfenghao" target="_blank" title="微博">
                      
                        <i class="fa fa-fw fa-weibo"></i>微博</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/shuaixiaohao" target="_blank" title="知乎">
                      
                        <i class="fa fa-fw fa-zhihu"></i>知乎</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.zcool.com.cn/work/ZMzI3ODMzODQ=.html" title="何杨作品集" target="_blank">何杨作品集</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#NumPy"><span class="nav-text">NumPy</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#NumPy-是什么？"><span class="nav-text">NumPy 是什么？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ndarray-对象"><span class="nav-text">Ndarray 对象</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#创建ndarray"><span class="nav-text">创建ndarray</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ndarray的属性"><span class="nav-text">ndarray的属性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Matplotlib"><span class="nav-text">Matplotlib</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ndarray的基本操作"><span class="nav-text">ndarray的基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#索引"><span class="nav-text">索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#切片"><span class="nav-text">切片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变形"><span class="nav-text">变形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#连结"><span class="nav-text">连结</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#切分"><span class="nav-text">切分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#副本"><span class="nav-text">副本</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ndarray的聚合操作"><span class="nav-text">ndarray的聚合操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#求和np-sum"><span class="nav-text">求和np.sum</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#最大最小值：np-max-np-min"><span class="nav-text">最大最小值：np.max/ np.min</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#其他聚合操作"><span class="nav-text">其他聚合操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#操作文件"><span class="nav-text">操作文件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ndarray的矩阵操作"><span class="nav-text">ndarray的矩阵操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本矩阵操作"><span class="nav-text">基本矩阵操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#广播机制"><span class="nav-text">广播机制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ndarray的排序"><span class="nav-text">ndarray的排序</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#快速排序"><span class="nav-text">快速排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#部分排序"><span class="nav-text">部分排序</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#字符串函数"><span class="nav-text">字符串函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-add"><span class="nav-text">numpy.char.add()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-multiply"><span class="nav-text">numpy.char.multiply()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-center"><span class="nav-text">numpy.char.center()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-capitalize"><span class="nav-text">numpy.char.capitalize()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-title"><span class="nav-text">numpy.char.title()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-lower"><span class="nav-text">numpy.char.lower()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-upper"><span class="nav-text">numpy.char.upper()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-split"><span class="nav-text">numpy.char.split()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-splitlines"><span class="nav-text">numpy.char.splitlines()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-strip"><span class="nav-text">numpy.char.strip()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-join"><span class="nav-text">numpy.char.join()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-replace"><span class="nav-text">numpy.char.replace()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-decode"><span class="nav-text">numpy.char.decode()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#numpy-char-encode"><span class="nav-text">numpy.char.encode()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Pandas"><span class="nav-text">Pandas</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Pandas介绍"><span class="nav-text">Pandas介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据结构"><span class="nav-text">数据结构</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#系列（Series）"><span class="nav-text">系列（Series）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据帧（DataFrame）"><span class="nav-text">数据帧（DataFrame）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#面板（Panel）"><span class="nav-text">面板（Panel）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Series（系列）"><span class="nav-text">Series（系列）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Series的创建"><span class="nav-text">1. Series的创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Series的索引和切片"><span class="nav-text">2. Series的索引和切片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Series的常用属性和方法"><span class="nav-text">3. Series的常用属性和方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Series的运算"><span class="nav-text">4. Series的运算</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DataFrame（数据帧）"><span class="nav-text">DataFrame（数据帧）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-DataFrame的创建"><span class="nav-text">1. DataFrame的创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-DataFrame的索引"><span class="nav-text">2. DataFrame的索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-DataFrame的运算"><span class="nav-text">3. DataFrame的运算</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#空数据处理"><span class="nav-text">空数据处理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#检查缺失值"><span class="nav-text">检查缺失值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#过滤丢失数据"><span class="nav-text">过滤丢失数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#填充缺少数据"><span class="nav-text">填充缺少数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多层索引"><span class="nav-text">多层索引</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#多层行索引"><span class="nav-text">多层行索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多层列索引"><span class="nav-text">多层列索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#索引与切片操作"><span class="nav-text">索引与切片操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#形状变换"><span class="nav-text">形状变换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#聚合操作"><span class="nav-text">聚合操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#合并、连接"><span class="nav-text">合并、连接</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pandas-concat-级联"><span class="nav-text">pandas.concat()级联</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pandas-append-函数添加"><span class="nav-text">pandas.append()函数添加</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pandas-merge-合并"><span class="nav-text">pandas.merge()合并</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IO"><span class="nav-text">IO</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#去重"><span class="nav-text">去重</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#替换"><span class="nav-text">替换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#映射"><span class="nav-text">映射</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#replace-函数：替换元素"><span class="nav-text">replace()函数：替换元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#map-函数：新建一列"><span class="nav-text">map()函数：新建一列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rename-函数：替换索引"><span class="nav-text">rename()函数：替换索引</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#异常检测和过滤"><span class="nav-text">异常检测和过滤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#排序"><span class="nav-text">排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分类"><span class="nav-text">分类</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Matplotlib-1"><span class="nav-text">Matplotlib</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、Matplotlib基础知识"><span class="nav-text">一、Matplotlib基础知识</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#只含单一曲线的图"><span class="nav-text">只含单一曲线的图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置子画布"><span class="nav-text">设置子画布</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网格线"><span class="nav-text">网格线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#坐标轴界限"><span class="nav-text">坐标轴界限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#坐标轴标签"><span class="nav-text">坐标轴标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#标题"><span class="nav-text">标题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#图例"><span class="nav-text">图例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#loc参数"><span class="nav-text">loc参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ncol参数"><span class="nav-text">ncol参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#linestyle、color、marker"><span class="nav-text">linestyle、color、marker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#保存图片"><span class="nav-text">保存图片</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、设置plot的风格和样式"><span class="nav-text">二、设置plot的风格和样式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#点和线的样式"><span class="nav-text">点和线的样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#X、Y轴坐标刻度"><span class="nav-text">X、Y轴坐标刻度</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三、2D图形"><span class="nav-text">三、2D图形</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#直方图"><span class="nav-text">直方图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#条形图"><span class="nav-text">条形图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#饼图"><span class="nav-text">饼图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#散点图"><span class="nav-text">散点图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四、图形内的文字、注释、箭头"><span class="nav-text">四、图形内的文字、注释、箭头</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#图形内的文字"><span class="nav-text">图形内的文字</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注释"><span class="nav-text">注释</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#五、3D图"><span class="nav-text">五、3D图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#曲面图"><span class="nav-text">曲面图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#玫瑰图-极坐标条形图"><span class="nav-text">玫瑰图/极坐标条形图</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        ﻿<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">冯  昊</span>

  
</div>










<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>
|
<span id="busuanzi_container_page_pv">
  总阅读量<span id="busuanzi_value_page_pv"></span>次
</span>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  















  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
   <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: '02e98d4fe2acfa75f722',
          clientSecret: '4fe3f0b2f74b9ff99587c5f3c1e1717db5222be7',
          repo: 'shuaixiaohao.github.io',
          owner: 'shuaixiaohao',
          admin: ['shuaixiaohao'],
          id: location.pathname,
          distractionFreeMode: 'true'
        })
        gitalk.render('gitalk-container')           
       </script>

  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("zTDhPq9nvImrdSY5TaOaFrXU-gzGzoHsz", "UGcsGNXzQTAhlTTENHKpM2kG");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  


  

  

</body>
</html>
